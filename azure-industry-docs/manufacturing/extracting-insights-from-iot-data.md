---
title: Architektura pro extrakci přehledů z IoT pro výrobu
description: Získejte přehledy z dat IoT pomocí služeb Azure.
author: ercenk
ms.author: ercenk
manager: gmarchet
ms.service: industry
ms.topic: article
ms.date: 11/28/2019
ms.openlocfilehash: c08e6bbb1da47084122dae1ed6a9e1cea0b59473
ms.sourcegitcommit: 3b175d73a82160c4cacec1ce00c6d804a93c765d
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 02/06/2020
ms.locfileid: "77053398"
---
# <a name="extracting-actionable-insights-from-iot-data"></a><span data-ttu-id="0caf1-103">Extrakce užitečných poznatků z dat IoT</span><span class="sxs-lookup"><span data-stu-id="0caf1-103">Extracting actionable insights from IoT data</span></span>

<span data-ttu-id="0caf1-104">Pokud zodpovídáte za počítače v produkčním prostředí, už jste si vědomi, že Internet věcí (IoT) je dalším krokem při vylepšení procesů a výsledků.</span><span class="sxs-lookup"><span data-stu-id="0caf1-104">If you are responsible for the machines on a factory floor, you are already aware that the Internet of Things (IoT) is the next step in improving your processes and results.</span></span> <span data-ttu-id="0caf1-105">Je prvním krokem, když máte snímače na počítačích nebo na továrním patře.</span><span class="sxs-lookup"><span data-stu-id="0caf1-105">Having sensors on machines, or the factory floor, is the first step.</span></span> <span data-ttu-id="0caf1-106">Dalším krokem je použití dat, což je objekt tohoto dokumentu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-106">The next step is to use the data—which is the object of this document.</span></span> <span data-ttu-id="0caf1-107">Tato příručka poskytuje technický přehled komponent potřebných k extrakci užitečných poznatků z analýzy dat IoT.</span><span class="sxs-lookup"><span data-stu-id="0caf1-107">This guide provides a technical overview of the components needed to extract actionable insights from IoT data analytics.</span></span>

<span data-ttu-id="0caf1-108">Řešení IoT Analytics slouží k transformaci nezpracovaných dat IoT ze sady zařízení do formuláře, který je lépe vhodný pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-108">IoT analytics solutions are about transforming raw IoT data coming from a set of devices into a form that is better suited for analytics.</span></span> <span data-ttu-id="0caf1-109">Jakmile jsou data ve formuláři analyzovatelné, můžeme ve skutečnosti provádět analýzy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-109">Once the data is in an analyzable form we can actually perform analytics.</span></span> <span data-ttu-id="0caf1-110">Mezi příklady analýz patří:</span><span class="sxs-lookup"><span data-stu-id="0caf1-110">Some examples of analytics include:</span></span>

- <span data-ttu-id="0caf1-111">jednoduché vizualizace dat telemetrie, například pruhový graf zobrazující teploty v čase</span><span class="sxs-lookup"><span data-stu-id="0caf1-111">simple visualizations of the telemetry data, for example, a bar chart showing temperatures over time</span></span>
- <span data-ttu-id="0caf1-112">Výpočet klíčových ukazatelů výkonu, například celkové efektivity vybavení (celkové efektivity zařízení)</span><span class="sxs-lookup"><span data-stu-id="0caf1-112">calculation of KPIs, for example, Overall Equipment Effectiveness (OEE)</span></span>
- <span data-ttu-id="0caf1-113">prediktivní analýza s využitím modelů strojového učení</span><span class="sxs-lookup"><span data-stu-id="0caf1-113">predictive analytics powered by machine learning models</span></span>

<span data-ttu-id="0caf1-114">Tyto analýzy pak poskytují přehledy, které informují o akcích.</span><span class="sxs-lookup"><span data-stu-id="0caf1-114">These analytics, in turn, provide insights that inform actions.</span></span> <span data-ttu-id="0caf1-115">Akce můžou být v rozsahu odeslání jednoduchého příkazu do počítače, aby se prováděla úprava provozních parametrů, aby se mohla provádět akce v jiném softwarovém systému, a to kvůli implementaci programů pro provozní vylepšení v celé společnosti.</span><span class="sxs-lookup"><span data-stu-id="0caf1-115">Actions may range from sending a simple command to a machine, to tweaking operational parameters, to performing an action on another software system, to implementing company-wide operational improvement programs.</span></span>

<span data-ttu-id="0caf1-116">Následující obrázek ukazuje řetěz akcí, ke kterým dochází mezi počítačem výrobního procesu a konečným výsledkem, což je reprezentace řídicího panelu "využití", ukazující graf a popisek "87,5%".</span><span class="sxs-lookup"><span data-stu-id="0caf1-116">The figure below shows a chain of actions that occur between a factory machine and the end result, which is a dashboard representation of “utilization,” showing a graph and the label “87.5%.”</span></span>

![Z továrny do řídicího panelu.](assets/extracting-insights-from-iot/factory-to-dashboard.png)

<span data-ttu-id="0caf1-118">Pro účely ilustrace budeme používat výpočet jednoduchého klíčového ukazatele výkonu: využití počítače.</span><span class="sxs-lookup"><span data-stu-id="0caf1-118">For the purposes of illustration, we will use the calculation of a simple KPI: machine utilization.</span></span> <span data-ttu-id="0caf1-119">*Využití počítače* představuje procento času, který počítač ve skutečnosti *vyrábí* .</span><span class="sxs-lookup"><span data-stu-id="0caf1-119">*Machine utilization* is the percentage of time the machine is actually *producing* parts.</span></span> <span data-ttu-id="0caf1-120">Například pokud je v směně 8 hodin a počítač vyrábí součásti na 7 hodin, pak je využití počítače pro tento posun 87,5% (7/8 × 100).</span><span class="sxs-lookup"><span data-stu-id="0caf1-120">For example, if there are 8 hours in a shift, and the machine is producing parts for 7 of those hours, then the machine utilization for that shift is 87.5% (7/8 x 100).</span></span>

## <a name="approach"></a><span data-ttu-id="0caf1-121">Přístup</span><span class="sxs-lookup"><span data-stu-id="0caf1-121">Approach</span></span>

<span data-ttu-id="0caf1-122">Aplikace IoT mají tři komponenty: **věci** (nebo zařízení), odesílají data nebo události, které se používají ke generování **přehledů**, které se používají ke generování **akcí** , které vám pomohou vylepšit firmu nebo proces.</span><span class="sxs-lookup"><span data-stu-id="0caf1-122">IoT applications have three components: **things** (or devices), sending data or events that are used to generate **insights**, which are used to generate **actions** to help improve a business or process.</span></span>

<span data-ttu-id="0caf1-123">Zařízení ve výrobní závodě (věci) odesílá různé typy dat, když to funguje.</span><span class="sxs-lookup"><span data-stu-id="0caf1-123">The equipment in a manufacturing plant (things) sends various types of data as it operates.</span></span> <span data-ttu-id="0caf1-124">Příkladem je počítač pro frézování, který odesílá rychlost kanálu a data o teplotě. používá se k vyhodnocení, jestli počítač běží, nebo ne – vhled, který se používá k optimalizaci závodu – akce.</span><span class="sxs-lookup"><span data-stu-id="0caf1-124">An example is a milling machine sending feed rate and temperature data; this is used to evaluate whether the machine is running or not—an insight—which is used to optimize the plant—an action.</span></span> <span data-ttu-id="0caf1-125">Provedeme vás kroky pro extrakci dat, vizualizaci na řídicím panelu, extrakci nových přehledů a provedení dalších akcí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-125">We will go through the steps to extract the data, visualize it in a dashboard, extract new insights, and take further actions.</span></span>
<span data-ttu-id="0caf1-126">![věcí k přehledům akcí.](assets/extracting-insights-from-iot/things-insights-actions.png)</span><span class="sxs-lookup"><span data-stu-id="0caf1-126">![Things to Insights to Actions.](assets/extracting-insights-from-iot/things-insights-actions.png)</span></span>

<span data-ttu-id="0caf1-127">Společnost Microsoft publikovala referenční architekturu s vysokou úrovní pro aplikace IoT, která projde různými subsystémy a doporučenými přístupy pro tyto subsystémy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-127">Microsoft has published a high level reference architecture for IoT applications that walks through the various subsystems and the recommended approaches for those subsystems.</span></span>
<span data-ttu-id="0caf1-128">Aplikace IoT se skládá z následujících subsystémů:</span><span class="sxs-lookup"><span data-stu-id="0caf1-128">An IoT application consists of the following subsystems:</span></span>

1. <span data-ttu-id="0caf1-129">Zařízení nebo místní hraniční brány, což jsou konkrétní druh zařízení, které může bezpečně registrovat zdroje zpráv (zařízení) s cloudem.</span><span class="sxs-lookup"><span data-stu-id="0caf1-129">Devices, or on-premises edge gateways, which are a specific kind of device that can securely register message sources (devices) with the cloud.</span></span> <span data-ttu-id="0caf1-130">Hraniční brána může také transformovat zprávy z nativního protokolu na jiný formát (například JSON).</span><span class="sxs-lookup"><span data-stu-id="0caf1-130">The edge gateway may also transform messages from a native protocol to another format (such as JSON).</span></span>
2. <span data-ttu-id="0caf1-131">Cloudová služba brány nebo centrum (například [azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) nebo [Azure Event Hubs](/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk)), které slouží k bezpečnému ingestování dat a poskytování možností správy zařízení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-131">A cloud gateway service, or hub (such as [Azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) or [Azure Event Hubs](/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk)), to securely ingest data and provide device management capabilities.</span></span> 
3. <span data-ttu-id="0caf1-132">Proudové procesory, které využívají streamovaná data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-132">Stream processors that consume streaming data.</span></span> <span data-ttu-id="0caf1-133">Procesory mohou být také integrovány s obchodními procesy a umísťují data do úložiště.</span><span class="sxs-lookup"><span data-stu-id="0caf1-133">The processors may also integrate with business processes and place the data into storage.</span></span>
4. <span data-ttu-id="0caf1-134">Uživatelské rozhraní ve formě řídicího panelu k vizualizaci dat IoT a usnadnění správy zařízení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-134">A user interface, in the form of a dashboard, to visualize IoT data and facilitate device management.</span></span>

![Architektura řešení.](assets/extracting-insights-from-iot/architecture.png)

<span data-ttu-id="0caf1-136">V tomto článku se zaměříme na proces extrahování přehledů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-136">In this article, we focus on the process of extracting insights.</span></span> <span data-ttu-id="0caf1-137">Toto jsou hlavní kroky:</span><span class="sxs-lookup"><span data-stu-id="0caf1-137">These are the major steps:</span></span>

1. <span data-ttu-id="0caf1-138">Přístup k datům a jejich zpracování do datového proudu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-138">Access the data and process it into a data stream.</span></span>
2. <span data-ttu-id="0caf1-139">Zpracujte a uložte data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-139">Process and store the data.</span></span>
3. <span data-ttu-id="0caf1-140">Vizualizujte nebo Prezentujte data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-140">Visualize or present the data.</span></span> 

<span data-ttu-id="0caf1-141">Na následujícím obrázku je diagram znázorňující tok dat ze zdroje dat, který slouží k převodu, k ingestování, ke zpracování a uložení, k prezentaci a k akcím.</span><span class="sxs-lookup"><span data-stu-id="0caf1-141">The figure below is a diagram that shows the flow of data, from data source, to convert, to ingestion, to process and store, to presentation, and finally action.</span></span>

![Data fow: zdroj, který se ingestuje do prezentace a akci.](assets/extracting-insights-from-iot/data-flow.png)

## <a name="converting-the-data-to-a-stream"></a><span data-ttu-id="0caf1-143">Převod dat na datový proud</span><span class="sxs-lookup"><span data-stu-id="0caf1-143">Converting the data to a stream</span></span>

<span data-ttu-id="0caf1-144">Data IoT jsou data časových řad: hodnoty od "věcí", které mohou být smysluplnější v časovém intervalu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-144">IoT data is time-series data: values from “things” that can be more meaningful over a time span.</span></span> <span data-ttu-id="0caf1-145">Vybavení na podlaze podniku funguje v průběhu času a během této doby dojde k událostem.</span><span class="sxs-lookup"><span data-stu-id="0caf1-145">Equipment on a plant floor operates through time, and events occur during that time.</span></span> <span data-ttu-id="0caf1-146">Pokud se data v inventáři neodesílají do služby pro příjem dat, jako je třeba [Azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk), musíme data pravidelně dotazovat ze svého úložiště, například do výrobního systému pro spouštění nebo z koncového bodu http, a posílat data do služby ingestování.</span><span class="sxs-lookup"><span data-stu-id="0caf1-146">If the data on the plant floor is not sent to a data ingestion service, such as [Azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk), we must poll for the data periodically from its store—for  example, a Manufacturing Execution System (MES), or an HTTP endpoint), and send the data to an ingestion service.</span></span>  
<span data-ttu-id="0caf1-147">Pro převod dat na datový proud máme obvykle:</span><span class="sxs-lookup"><span data-stu-id="0caf1-147">To convert data to a stream, we usually:</span></span>

1. <span data-ttu-id="0caf1-148">Přístup ke zdroji dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-148">Access the data source.</span></span>
2. <span data-ttu-id="0caf1-149">Transformujte a obohacente data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-149">Transform and enrich the data.</span></span>
3. <span data-ttu-id="0caf1-150">Publikujte data do koncového bodu, který může ingestovat streamovaná data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-150">Post the data to an endpoint that can ingest streaming data.</span></span>

<span data-ttu-id="0caf1-151">Nepokrýváme vám podrobně přístup ke zdroji dat, protože přístup závisí na tom, kde se data nacházejí, a variace jsou příliš mnoho.</span><span class="sxs-lookup"><span data-stu-id="0caf1-151">We don’t cover the access to the data source in detail here, since access depends on where the data resides,  and the variations are too numerous.</span></span>

## <a name="transforming-and-enriching-the-data"></a><span data-ttu-id="0caf1-152">Transformace a rozšíření dat</span><span class="sxs-lookup"><span data-stu-id="0caf1-152">Transforming and enriching the data</span></span>

<span data-ttu-id="0caf1-153">Nezpracovaná data musí obvykle podléhat transformačním operacím, aby je bylo možné sjednotit a připravit na přijímání.</span><span class="sxs-lookup"><span data-stu-id="0caf1-153">Raw data must usually undergo transformation operations to standardize it and prepare it for ingestion.</span></span>  <span data-ttu-id="0caf1-154">Konkrétní transformace se budou lišit v závislosti na použitém typu analýzy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-154">The specific transformations will vary depending on the type of analytics used.</span></span>  <span data-ttu-id="0caf1-155">Mezi běžné příklady transformací dat patří data časových řad, ve kterých může chybět měření a musí být zavedená, nebo kde je potřeba vyvažovat časová měřítka v různých počítačích.</span><span class="sxs-lookup"><span data-stu-id="0caf1-155">Some common examples of data transformations are time-series data where measurements may be missing and need to be inputted, or where the time scales across different machines needs to be rationalized.</span></span>  <span data-ttu-id="0caf1-156">Chtěli bychom mít záznamy dat, které mají časové razítko (Pokud je zdroj obsahuje), a v páru název-hodnota.</span><span class="sxs-lookup"><span data-stu-id="0caf1-156">We would like to have data records that are timestamped (if the source contains it) and in name-value pairs.</span></span> <span data-ttu-id="0caf1-157">Data se běžně nacházejí v hierarchickém formátu a je nutné je transformovat do ploché struktury.</span><span class="sxs-lookup"><span data-stu-id="0caf1-157">Commonly, the data comes in a hierarchical format, and must be transformed into a flat structure.</span></span>

<span data-ttu-id="0caf1-158">Následující obrázek ukazuje hierarchickou datovou strukturu s zubatým profilem, která je převedena na standardizovaný formát sloupce a řádku (blok).</span><span class="sxs-lookup"><span data-stu-id="0caf1-158">The figure below shows a hierarchical data structure with a jagged profile, converted to a standardized column and row format (a block).</span></span>

![Datový tvar z hierarchického na plochý.](assets/extracting-insights-from-iot/hierarchy-to-flat.png)

<span data-ttu-id="0caf1-160">Data nejsou většinou dostupná z Internetu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-160">Usually, the data is not accessible from the internet.</span></span> <span data-ttu-id="0caf1-161">Běžným způsobem je použít hraniční bránu k odesílání dat z továrny do bodu ingestování.</span><span class="sxs-lookup"><span data-stu-id="0caf1-161">A common pattern is to use an edge gateway to push data from the plant floor to the ingestion point.</span></span> <span data-ttu-id="0caf1-162">[Azure IoT Edge](/azure/iot-edge?WT.mc_id=iotinsightssoln-docs-ercenk) je služba, která se sestavuje nad IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="0caf1-162">[Azure IoT Edge](/azure/iot-edge?WT.mc_id=iotinsightssoln-docs-ercenk) is a service that builds on top of IoT Hub.</span></span> <span data-ttu-id="0caf1-163">Zařízení IoT Edge může fungovat jako brána, aby kryla tři [vzory](/azure/iot-edge/iot-edge-as-gateway?WT.mc_id=iotinsightssoln-docs-ercenk): transparentní bránu, překlad protokolu a překlad identity.</span><span class="sxs-lookup"><span data-stu-id="0caf1-163">An IoT Edge device can act as a gateway to cover three [patterns](/azure/iot-edge/iot-edge-as-gateway?WT.mc_id=iotinsightssoln-docs-ercenk): transparent gateway, protocol translation, and identity translation.</span></span>

<span data-ttu-id="0caf1-164">Pokud jsou data k dispozici externě a jsou přístupná z Internetu, můžete k nim použít několik služeb Azure pro přístup k datům, jejich transformaci a rozšíření.</span><span class="sxs-lookup"><span data-stu-id="0caf1-164">If the data is available externally and is accessible from internet, several Azure services can be used to access, transform, and enrich the data.</span></span> <span data-ttu-id="0caf1-165">Mezi tyto možnosti patří:</span><span class="sxs-lookup"><span data-stu-id="0caf1-165">Among those options are:</span></span>

- <span data-ttu-id="0caf1-166">Vlastní kód nasazený v různých výpočetních službách Azure, jako je [App Service](/azure/app-service/?WT.mc_id=iotinsightssoln-docs-ercenk), [Služba Azure Kubernetes](/azure/aks/?WT.mc_id=iotinsightssoln-docs-ercenk) (AKS), [Container Instances](/azure/container-instances/?WT.mc_id=iotinsightssoln-docs-ercenk)nebo [Service Fabric](/azure/service-fabric/service-fabric-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-166">Custom code deployed in various Azure compute services, such as [App Service](/azure/app-service/?WT.mc_id=iotinsightssoln-docs-ercenk),  [Azure Kubernetes Service](/azure/aks/?WT.mc_id=iotinsightssoln-docs-ercenk) (AKS), [Container Instances](/azure/container-instances/?WT.mc_id=iotinsightssoln-docs-ercenk), or [Service Fabric](/azure/service-fabric/service-fabric-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>
- [<span data-ttu-id="0caf1-167">Azure Logic Apps</span><span class="sxs-lookup"><span data-stu-id="0caf1-167">Azure Logic Apps</span></span>](/azure/logic-apps/?WT.mc_id=iotinsightssoln-docs-ercenk)
- [<span data-ttu-id="0caf1-168">Kanály a aktivity ve službě Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="0caf1-168">Pipelines and activities in Azure Data Factory</span></span>](/azure/data-factory/copy-activity-overview/?WT.mc_id=iotinsightssoln-docs-ercenk)
- [<span data-ttu-id="0caf1-169">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="0caf1-169">Azure Functions</span></span>](/azure/azure-functions/functions-overview)
- [<span data-ttu-id="0caf1-170">BizTalk Services</span><span class="sxs-lookup"><span data-stu-id="0caf1-170">BizTalk Services</span></span>](https://azure.microsoft.com/services/biztalk-services/)

<span data-ttu-id="0caf1-171">Každá z výše uvedených služeb má své výhody a náklady, a to v závislosti na scénáři.</span><span class="sxs-lookup"><span data-stu-id="0caf1-171">Each of the services above have their own benefits and costs, depending on the scenario.</span></span> <span data-ttu-id="0caf1-172">Logic Apps například poskytuje způsob, jak [transformovat dokumenty XML](/azure/logic-apps/logic-apps-enterprise-integration-transform?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-172">For example, Logic Apps provide a means for [transforming XML documents](/azure/logic-apps/logic-apps-enterprise-integration-transform?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-173">Data však mohou být ve složitém dokumentu XML, takže nemusí být praktické vyvíjet velký skript XSLT pro transformaci dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-173">However, the data can be an overly complex XML document, so it may not be practical to develop a large XSLT script to transform the data.</span></span> <span data-ttu-id="0caf1-174">V takovém případě může jeden vytvořit hybridní řešení s využitím více mikroslužeb z různých služeb Azure.</span><span class="sxs-lookup"><span data-stu-id="0caf1-174">In this case, one might develop a hybrid solution using multiple microservices from different Azure services.</span></span> <span data-ttu-id="0caf1-175">Například mikroslužba implementovaná v Azure Logic Apps se může dotazovat na koncový bod HTTP, ukládat nezpracovaný výsledek dočasně a upozorňovat na další mikroslužby.</span><span class="sxs-lookup"><span data-stu-id="0caf1-175">For example, a microservice, implemented in Azure Logic Apps, can poll an HTTP endpoint, store the raw result temporarily, and notify another microservice.</span></span> <span data-ttu-id="0caf1-176">Druhá mikroslužba – která transformuje zprávu – může být vlastní kód hostovaný na [Azure Functions hostitele](https://github.com/Azure/azure-functions-host).</span><span class="sxs-lookup"><span data-stu-id="0caf1-176">The other microservice—which transforms the message—can be custom code hosted on [Azure Functions Host](https://github.com/Azure/azure-functions-host).</span></span>  

![Protokol HTTPS se dotazuje na data a zpracovává je pomocí funkcí.](assets/extracting-insights-from-iot/poll-logic-process.png)

<span data-ttu-id="0caf1-178">Případně se můžete rozhodnout pro pracovní postup orchestrující Azure Data Factory, kde posloupnost aktivit provádí transformace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-178">Alternatively, you may opt for a workflow orchestrated by Azure Data Factory where a sequence of activities performs the transformations.</span></span> <span data-ttu-id="0caf1-179">Další podrobnosti o typu dostupných aktivit najdete v tématu [kanály a aktivity v Azure Data Factory](/azure/data-factory/concepts-pipelines-activities).</span><span class="sxs-lookup"><span data-stu-id="0caf1-179">For more details on the type of activities available, see [Pipelines and activities in Azure Data Factory](/azure/data-factory/concepts-pipelines-activities).</span></span>
<span data-ttu-id="0caf1-180">Zprávy mohou být časové razítko při příjmu, nebo mohou obsahovat časové razítko, které nám umožní rekonstruovat časovou řadu několika měřených hodnot.</span><span class="sxs-lookup"><span data-stu-id="0caf1-180">The messages can be timestamped at reception, or they may contain a timestamp to let us reconstruct the time series of several values measured.</span></span> <span data-ttu-id="0caf1-181">Proto je zanedbatelná latence příjmu a vysoká propustnost zásadní, aby se zaručila integrita informací a časová osa s případnými odezvami.</span><span class="sxs-lookup"><span data-stu-id="0caf1-181">Hence, negligible ingestion latency and high throughput are fundamental to guarantee the integrity of information and timeliness of eventual responses.</span></span> <span data-ttu-id="0caf1-182">Abychom minimalizovali latenci, normalizují se časová razítka co nejblíže k podniku.</span><span class="sxs-lookup"><span data-stu-id="0caf1-182">To minimize the latency, we normalize the time stamps as close as possible to the plant.</span></span>

## <a name="ingesting-the-data-stream"></a><span data-ttu-id="0caf1-183">Ingestování datového proudu</span><span class="sxs-lookup"><span data-stu-id="0caf1-183">Ingesting the data stream</span></span>

<span data-ttu-id="0caf1-184">Pokud chcete data analyzovat jako datový proud, můžeme pro identifikaci vzorů a vztahů provádět dotazy na data na základě časových oken.</span><span class="sxs-lookup"><span data-stu-id="0caf1-184">To analyze the data as a stream, we can do queries on the data based on time windows to identify patterns and relationships.</span></span> <span data-ttu-id="0caf1-185">Platforma Azure obsahuje různé služby, které mohou ingestovat data při vysoké propustnosti.</span><span class="sxs-lookup"><span data-stu-id="0caf1-185">There are various services on the Azure platform that can ingest data at high throughput.</span></span>
<span data-ttu-id="0caf1-186">Výběr mezi službami závisí na potřebách projektu, jako je Správa zařízení, podpora protokolů, škálovatelnost, preference týmu programovacího modelu atd. Například tým může mít přednost při použití Kafka z důvodu jejich používání nebo pro řešení musí mít zprostředkovatele Kafka.</span><span class="sxs-lookup"><span data-stu-id="0caf1-186">Choosing between the services below depends on the needs of the project, such as device management, protocol support, scalability, team’s preference of programming model etc. For example, team may have a preference to use Kafka because of their experience, or the need to have a Kafka broker for the solution.</span></span> <span data-ttu-id="0caf1-187">Nebo pro jiný případ může projekt potřebovat systém pro příjem dat, který umožňuje využít [ověření klíče TPM IoT Hub Device Provisioning Service](/azure/iot-dps/?WT.mc_id=iotinsightssoln-docs-ercenk) k zabezpečení přístupu zařízení k bodu přijímání.</span><span class="sxs-lookup"><span data-stu-id="0caf1-187">Or, for another case, the project may need the data ingestion system to take advantage of [IoT Hub Device Provisioning Service’s TPM Key Attestation](/azure/iot-dps/?WT.mc_id=iotinsightssoln-docs-ercenk) to secure the access of the devices to the ingestion point.</span></span>

- <span data-ttu-id="0caf1-188">[Azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) je obousměrné komunikační centrum mezi aplikacemi IoT a zařízeními.</span><span class="sxs-lookup"><span data-stu-id="0caf1-188">[Azure IoT Hub](/azure/iot-hub/?WT.mc_id=iotinsightssoln-docs-ercenk) is a bi-directional communication hub between IoT applications and the devices.</span></span> <span data-ttu-id="0caf1-189">Jedná se o škálovatelnou službu, která umožňuje plně vybavená řešení IoT, protože zajišťuje zabezpečenou komunikaci, směrování zpráv, integraci s dalšími službami Azure a funkce správy pro řízení a konfiguraci zařízení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-189">It is a scalable service that enables full-featured IoT solutions by providing secure communications, message routing, integration with other Azure services, and management features to control and configure the devices.</span></span>

- <span data-ttu-id="0caf1-190">[Azure Event Hubs](/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk) je vysoce škálovatelná služba, která slouží ke shromažďování dat telemetrie z souběžných zdrojů za účelem překročení vysoké míry propustnosti.</span><span class="sxs-lookup"><span data-stu-id="0caf1-190">[Azure Event Hubs](/azure/event-hubs/event-hubs-about?WT.mc_id=iotinsightssoln-docs-ercenk) is a high-scale ingestion-only service for collecting telemetry data from concurrent sources at exceedingly high throughput rates.</span></span>
- <span data-ttu-id="0caf1-191">[Apache Kafka v HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) je spravovaná služba, která hostuje [Apache Kafka](https://kafka.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="0caf1-191">[Apache Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) is a managed service that hosts [Apache Kafka](https://kafka.apache.org/).</span></span> <span data-ttu-id="0caf1-192">Apache Kafka je open source platforma pro distribuované streamování, která poskytuje také funkce zprostředkovatele zpráv.</span><span class="sxs-lookup"><span data-stu-id="0caf1-192">Apache Kafka is an open-source distributed streaming platform that also provides message broker functionality.</span></span> <span data-ttu-id="0caf1-193">Hostovaná služba má smlouva SLA (SLA) 99,9% v době provozu Kafka.</span><span class="sxs-lookup"><span data-stu-id="0caf1-193">The hosted service has a Service Level Agreement (SLA) of 99.9% on Kafka uptime.</span></span>

## <a name="processing-and-storing-the-data"></a><span data-ttu-id="0caf1-194">Zpracování a ukládání dat</span><span class="sxs-lookup"><span data-stu-id="0caf1-194">Processing and storing the data</span></span>

<span data-ttu-id="0caf1-195">Aplikace IoT přináší výzvy, protože se jedná o systémy založené na událostech, které také potřebují uchovávat historická data a pracovat s nimi.</span><span class="sxs-lookup"><span data-stu-id="0caf1-195">The IoT applications introduce challenges, as they are event-driven systems, that also need to keep and operate on historical data.</span></span> <span data-ttu-id="0caf1-196">Příchozí data jsou připojená typ dat a můžou potenciálně růst velká.</span><span class="sxs-lookup"><span data-stu-id="0caf1-196">The incoming data is an append type of data and can potentially grow large.</span></span> <span data-ttu-id="0caf1-197">Je potřeba uchovávat data po delší dobu, hlavně z těchto důvodů: archivace, dávková analýza a vytváření modelů strojového učení (ML).</span><span class="sxs-lookup"><span data-stu-id="0caf1-197">There is a need to keep data for longer periods, primarily for these reasons: archive, batch analytics, and to build machine learning (ML) models.</span></span> <span data-ttu-id="0caf1-198">Na druhé straně je datový proud událostí velmi důležitý pro detekci anomálií v reálném čase za účelem detekce anomálií, rozpoznávání vzorů v průběhu vracení časových oken nebo spouštění výstrah, pokud hodnoty přestanou nad nebo pod prahovou hodnotou.</span><span class="sxs-lookup"><span data-stu-id="0caf1-198">On the other hand, the event stream is crucial for analyzing in near real-time to detect anomalies, recognize patterns over rolling time windows, or triggering alerts, if values go over or below a threshold.</span></span>
<span data-ttu-id="0caf1-199">Referenční architektura Azure IoT od Microsoftu prezentuje doporučený tok dat pro zařízení do cloudových zpráv a událostí v řešení IoT pomocí architektury lambda.</span><span class="sxs-lookup"><span data-stu-id="0caf1-199">Microsoft’s Azure IoT Reference Architecture presents a recommended data flow for device to cloud messages and events in an IoT solution using Lambda architecture.</span></span> <span data-ttu-id="0caf1-200">Architektura lambda umožňuje analýzu dat pro streamování téměř v reálném čase, a také archivovaných dat, což dává nejlepší možnost pro zpracování příchozích dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-200">The Lambda architecture enables the analysis of both near real-time, streaming data, as well as archived data, which makes it the best option for processing of the incoming data.</span></span>

## <a name="lambda-architecture"></a><span data-ttu-id="0caf1-201">Architektura lambda</span><span class="sxs-lookup"><span data-stu-id="0caf1-201">Lambda architecture</span></span>

<span data-ttu-id="0caf1-202">Architektura lambda řeší tento problém vytvořením dvou cest pro tok dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-202">The Lambda architecture addresses this problem by creating two paths for data flow.</span></span> <span data-ttu-id="0caf1-203">Těmito dvěma cestami procházejí všechna data, která přicházejí do systému:</span><span class="sxs-lookup"><span data-stu-id="0caf1-203">All data coming into the system goes through these two paths:</span></span>

- <span data-ttu-id="0caf1-204">Dávková vrstva (studená cesta) ukládá všechna příchozí data v nezpracované podobě a provádí dávkové zpracování dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-204">A batch layer (cold path) stores all the incoming data in its raw form and performs batch processing on the data.</span></span> <span data-ttu-id="0caf1-205">Výsledek tohoto zpracování je uložen jako dávkové zobrazení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-205">The result of this processing is stored as a batch view.</span></span> <span data-ttu-id="0caf1-206">Je to pomalé zpracování kanálu, který spouští složitou analýzu, například kombinování dat z více zdrojů a delší dobu (v hodinách, dnech nebo déle) a generování nových informací, jako jsou sestavy, modely strojového učení, etcetera.</span><span class="sxs-lookup"><span data-stu-id="0caf1-206">It is a slow processing pipeline executing complex analysis, for example combining data from multiple sources and over a longer period (hours, days, or longer), and generating new information such as reports, machine learning models, etcetera.</span></span>
- <span data-ttu-id="0caf1-207">Rychlost (teplé cesty) analyzuje data v reálném čase.</span><span class="sxs-lookup"><span data-stu-id="0caf1-207">A speed layer (warm path) analyzes data in real time.</span></span> <span data-ttu-id="0caf1-208">Tato vrstva je určená pro nízkou latenci, ovšem na úkor přesnosti.</span><span class="sxs-lookup"><span data-stu-id="0caf1-208">This layer is designed for low latency, at the expense of accuracy.</span></span> <span data-ttu-id="0caf1-209">Je rychlejší kanál pro zpracování, který archivuje a zobrazuje příchozí zprávy, a analyzuje tyto záznamy generující krátkodobé kritické informace a akce, jako jsou například alarmy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-209">It is a faster processing pipeline that archives and displays incoming messages, and analyzes these records generating short term critical information and actions such as alarms.</span></span>
- <span data-ttu-id="0caf1-210">Dávková vrstva dávkové vrstvy do "obsluhované vrstvy", která reaguje na dotazy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-210">The batch layer feeds into a “serving layer,” which responds to queries.</span></span> <span data-ttu-id="0caf1-211">Dávková vrstva indexuje dávkové zobrazení pro efektivní dotazování.</span><span class="sxs-lookup"><span data-stu-id="0caf1-211">The batch layer indexes the batch view for efficient querying.</span></span> <span data-ttu-id="0caf1-212">Rychlostní vrstva přidává do obslužné vrstvy přírůstkové aktualizace založené na nejnovějších datech.</span><span class="sxs-lookup"><span data-stu-id="0caf1-212">The speed layer updates the serving layer with incremental updates based on the most recent data.</span></span>

<span data-ttu-id="0caf1-213">Následující obrázek znázorňuje pět bloků, které reprezentují fáze transformace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-213">The following image shows five blocks that represent stages of transformation.</span></span> <span data-ttu-id="0caf1-214">Prvním blokem je datový proud, který paralelně přechází mezi vrstvou rychlosti i dávkovou vrstvu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-214">The first block is the data stream, which feeds both the speed layer and batch layer in parallel.</span></span> <span data-ttu-id="0caf1-215">Obě vrstvy jsou pokryté vrstvou obsluhy, vrstva rychlosti a obsluha vrstvy oba zakládá klienta Analytics.</span><span class="sxs-lookup"><span data-stu-id="0caf1-215">Both layers feed the serving layer, The speed layer and the serving layer both feed the analytics client.</span></span>
<span data-ttu-id="0caf1-216">![architektuře lambda.](assets/extracting-insights-from-iot/lambda-schematic.png)</span><span class="sxs-lookup"><span data-stu-id="0caf1-216">![Lambda architecture.](assets/extracting-insights-from-iot/lambda-schematic.png)</span></span>

 <span data-ttu-id="0caf1-217">Platforma Azure poskytuje různé služby, které se dají použít k implementaci architektury.</span><span class="sxs-lookup"><span data-stu-id="0caf1-217">Azure platform provides various services that can be used for implementing the architecture.</span></span> <span data-ttu-id="0caf1-218">Následující diagram znázorňuje, jak lze tyto služby namapovat k implementaci.</span><span class="sxs-lookup"><span data-stu-id="0caf1-218">The following diagram shows how those services can be mapped to implement it.</span></span> <span data-ttu-id="0caf1-219">Obrázek znázorňuje pět fází transformace s každou fází obsahující relevantní technologie Azure.</span><span class="sxs-lookup"><span data-stu-id="0caf1-219">The figure shows the five stages of transformation, with each stage containing relevant Azure technologies.</span></span> <span data-ttu-id="0caf1-220">Tmavší barevná pole označují dostupnost více možností provádění těchto úloh.</span><span class="sxs-lookup"><span data-stu-id="0caf1-220">The darker colored boxes represent the availability of multiple options to perform those tasks.</span></span>

![Architektura lambda.](assets/extracting-insights-from-iot/lambda-architecture-all.png)

<span data-ttu-id="0caf1-222">Možnosti pro službu ingestování dat na vrstvě rychlosti jsou uvedené v předchozí části ingestování datového proudu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-222">The options for the data ingestion service on the speed layer are covered in the previous section, “Ingesting the data stream.”</span></span>

<span data-ttu-id="0caf1-223">[Apache Kafka v HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) může být možnost služby, která implementuje datový proud jak pro službu příjmu dat, tak pro zpracování datových proudů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-223">[Apache Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction?WT.mc_id=iotinsightssoln-docs-ercenk) can be a service option to implement the data stream both for the data ingestion service and the stream processing.</span></span>

<span data-ttu-id="0caf1-224">Pokud používáte Event Hubs pro službu ingestování dat, použijte [Azure Stream Analytics](/azure/stream-analytics?WT.mc_id=iotinsightssoln-docs-ercenk) (ASA).</span><span class="sxs-lookup"><span data-stu-id="0caf1-224">Use [Azure Stream Analytics](/azure/stream-analytics?WT.mc_id=iotinsightssoln-docs-ercenk) (ASA) if you are using Event Hubs for the data ingestion service.</span></span> <span data-ttu-id="0caf1-225">Azure Stream Analytics je modul pro zpracování událostí, který umožňuje zkoumat velké objemy dat streamované ze zařízení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-225">Azure Stream Analytics is an event-processing engine that allows you to examine high volumes of data streaming from devices.</span></span> <span data-ttu-id="0caf1-226">Příchozí data můžou pocházet ze zařízení, senzorů, webů, informačních kanálů sociálních médií, aplikací a dalších.</span><span class="sxs-lookup"><span data-stu-id="0caf1-226">Incoming data can originate from devices, sensors, web sites, social media feeds, applications, and more.</span></span> <span data-ttu-id="0caf1-227">Podporuje také extrahování informací ze streamů, identifikování vzorů a relace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-227">It also supports extracting information from data streams, identifying patterns, and relationships.</span></span>

<span data-ttu-id="0caf1-228">Stream Analytics dotazy začínají zdrojem streamování dat, která se ingestují do centra událostí Azure, Azure IoT Hub nebo z úložiště dat, jako je Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="0caf1-228">Stream Analytics queries start with a source of streaming data that is ingested into Azure Event Hub, Azure IoT Hub or from a data store like Azure Blob Storage.</span></span> <span data-ttu-id="0caf1-229">Pokud chcete prošetřit datový proud, vytvořte úlohu Stream Analytics, která určuje vstupní zdroj, který streamuje data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-229">To examine a stream, create a Stream Analytics job that specifies the input source that streams data.</span></span> <span data-ttu-id="0caf1-230">Úloha také určuje transformační dotaz, který definuje, jak vyhledávat data, vzory nebo relace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-230">The job also specifies a transformation query that defines how to look for data, patterns, or relationships.</span></span> <span data-ttu-id="0caf1-231">Transformační dotaz využívá dotazovací jazyk typu SQL, který se používá k filtrování, řazení, agregaci a připojení streamovaných dat v časovém období.</span><span class="sxs-lookup"><span data-stu-id="0caf1-231">The transformation query leverages a SQL-like query language that is used to filter, sort, aggregate, and join streaming data over a period of time.</span></span>

## <a name="warm-path"></a><span data-ttu-id="0caf1-232">Cesta k teplému</span><span class="sxs-lookup"><span data-stu-id="0caf1-232">Warm Path</span></span>

<span data-ttu-id="0caf1-233">Ukázkový scénář pro tento dokument je klíčový ukazatel výkonu využití počítače (zavedený na začátku průvodce).</span><span class="sxs-lookup"><span data-stu-id="0caf1-233">The example scenario for this document is a machine utilization KPI (introduced at the beginning of the guide).</span></span> <span data-ttu-id="0caf1-234">Mohli bychom Naive interpretovat data a předpokládat, že pokud počítač odesílá data, využije se.</span><span class="sxs-lookup"><span data-stu-id="0caf1-234">We could opt for a naive interpretation of the data and assume that if the machine is sending data then it is being utilized.</span></span> <span data-ttu-id="0caf1-235">Počítač ale může odesílat data, ale ve skutečnosti nevyrábí cokoli (například může být nečinný nebo se udržuje).</span><span class="sxs-lookup"><span data-stu-id="0caf1-235">However, the machine could be sending data while not really producing anything (for example, it could be idle, or being maintained).</span></span> <span data-ttu-id="0caf1-236">Tím se při pokusu o extrakci informací z dat IoT vysvětluje velmi častý problém: hledaná data nejsou k dispozici v datech, která získáváte.</span><span class="sxs-lookup"><span data-stu-id="0caf1-236">This highlights a very common challenge when trying to extract insight out of IoT data: the data you are looking for is not available in the data you are getting.</span></span> <span data-ttu-id="0caf1-237">V našem příkladu tedy nezískáváme data jasně a jednoznačně oznamujeme, zda počítač vyrábí nebo ne.</span><span class="sxs-lookup"><span data-stu-id="0caf1-237">So, in our example, we are not getting data clearly and unequivocally telling us whether or not the machine is producing.</span></span>  <span data-ttu-id="0caf1-238">Proto je potřeba odvodit využití kombinováním dat, která shromažďujeme s ostatními zdroji dat, a použít pravidla k určení toho, jestli počítač vyrábí nebo ne.</span><span class="sxs-lookup"><span data-stu-id="0caf1-238">Therefore, we need to infer utilization by combining the data we are getting with other sources of data, and applying rules to determine of whether or not the machine is producing.</span></span> <span data-ttu-id="0caf1-239">Kromě toho se tato pravidla mohou změnit od společnosti na firmu, protože mohou mít různé výklady toho, co produkce vyrábí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-239">In addition, these rules may change from company to company since they may have different interpretations of what “producing” is.</span></span> <span data-ttu-id="0caf1-240">Doba zahřívání je veškerá o analýze dat v systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-240">The warm path is all about analyzing as the data flows through the system.</span></span> <span data-ttu-id="0caf1-241">Tento Stream zpracováváme prakticky v reálném čase, uložíme ho do teplého úložiště a nahrajeme ho do klientů pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-241">We process this stream in near-real time, save it to the warm storage, and push it to the analytics clients.</span></span>

<span data-ttu-id="0caf1-242">Azure Event Hubs je platforma pro zpracování velkých objemů dat a služba pro příjem událostí, která dokáže přijímat a zpracovávat miliony událostí za sekundu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-242">Azure Event Hubs is a big data streaming platform and event ingestion service, capable of receiving and processing millions of events per second.</span></span> <span data-ttu-id="0caf1-243">Služba Event Hubs dokáže zpracovávat a ukládat události, data nebo telemetrické údaje produkované distribuovaným softwarem a zařízeními.</span><span class="sxs-lookup"><span data-stu-id="0caf1-243">Event Hubs can process and store events, data, or telemetry produced by distributed software and devices.</span></span> <span data-ttu-id="0caf1-244">Data odeslaná do centra událostí je možné transformovat a uložit pomocí libovolného poskytovatele analýz v reálném čase nebo adaptérů pro dávkové zpracování a ukládání.</span><span class="sxs-lookup"><span data-stu-id="0caf1-244">Data sent to an event hub can be transformed and stored using any real-time analytics provider or batching/storage adapters.</span></span> <span data-ttu-id="0caf1-245">Event Hubs provede dokonalý shodu prvního kroku v teplé cestě pro tok dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-245">Event Hubs makes the perfect match for the first step in the warm path for the data flow.</span></span>

<span data-ttu-id="0caf1-246">Následující obrázek ukazuje fázi rychlosti vrstev.</span><span class="sxs-lookup"><span data-stu-id="0caf1-246">The figure below shows the speed layer stage.</span></span> <span data-ttu-id="0caf1-247">Skládá se z centra událostí, instance Stream Analytics a úložiště dat pro teplé úložiště.</span><span class="sxs-lookup"><span data-stu-id="0caf1-247">It consists of an event hub, a Stream Analytics instance, and a data store for warm storage.</span></span>

![Architektura lambda: byla zvýrazněna rychlost vrstvy.](assets/extracting-insights-from-iot/lambda-2.png)
  
<span data-ttu-id="0caf1-249">Platforma Azure poskytuje mnoho možností pro zpracování událostí v centru událostí, ale doporučujeme Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="0caf1-249">The Azure platform provides many options for processing the events on an Event Hub, however, we recommend Stream Analytics.</span></span> <span data-ttu-id="0caf1-250">Stream Analytics může do služba Power BI zasílat data a vizualizovat streamovaná data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-250">Stream Analytics can also push data to the Power BI service to visualize streamed data.</span></span>

<span data-ttu-id="0caf1-251">Stream Analytics může spouštět složitou analýzu ve velkém měřítku, například bubny, posouvání/skákající Windows, agregace datových proudů a spojení externích zdrojů dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-251">Stream Analytics can execute complex analysis at scale, for example, tumbling/sliding/hopping windows, stream aggregations, and external data source joins.</span></span> <span data-ttu-id="0caf1-252">V případě složitějšího zpracování je možné výkon rozšířit pomocí kaskádování více instancí Event Hubs, Stream Analytics úloh a Azure Functions, jak je znázorněno na následujícím obrázku.</span><span class="sxs-lookup"><span data-stu-id="0caf1-252">For even more complex processing, performance can be extended by cascading multiple instances of Event Hubs, Stream Analytics jobs, and Azure functions, as shown in the following figure.</span></span>

![Event Hubs k analýze Power BI.](assets/extracting-insights-from-iot/event-hubs-to-power-bi.png)
  
<span data-ttu-id="0caf1-254">Teplé úložiště je možné implementovat s různými službami na platformě Azure, například Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="0caf1-254">Warm storage can be implemented with various services on the Azure platform, such as Azure SQL Database.</span></span> <span data-ttu-id="0caf1-255">Doporučujeme [Azure Cosmos DB](/azure/cosmos-db/introduction?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-255">We recommend [Azure Cosmos DB](/azure/cosmos-db/introduction?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-256">Je to globálně distribuovaná databáze Microsoftu pro více modelů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-256">It is Microsoft's globally distributed, multi-model database.</span></span> <span data-ttu-id="0caf1-257">Je nejvhodnější pro datové sady, které můžou využívat flexibilní rozhraní, schémat-nezávislá, automatické indexování a rozsáhlá rozhraní dotazů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-257">It is best for datasets that can benefit from flexible, schema-agnostic, automatic indexing, and rich query interfaces.</span></span> <span data-ttu-id="0caf1-258">Cosmos DB umožňuje Kromě automatického převzetí služeb při selhání ruční převzetí služeb při selhání, čtení a zápis.</span><span class="sxs-lookup"><span data-stu-id="0caf1-258">Cosmos DB allows multi-region, read/write, and supports manual failover in addition to automatic failover.</span></span> <span data-ttu-id="0caf1-259">Kromě toho Cosmos DB umožňuje uživateli pro svá data nastavit hodnotu TTL (Time to Live), která automaticky vyprší stará data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-259">In addition, Cosmos DB allows the user to set a time-to-live (TTL) on their data, which makes expiring old data automatic.</span></span> <span data-ttu-id="0caf1-260">Tuto funkci doporučujeme použít k řízení času, kdy záznamy zůstanou v databázi, a tím řízení velikosti databáze.</span><span class="sxs-lookup"><span data-stu-id="0caf1-260">We recommend using the feature to control the time the records stay in the database, thus controlling the database size.</span></span>

<span data-ttu-id="0caf1-261">Ceny za Cosmos DB jsou založené na využitém úložišti a zřízených [jednotkách požadavků](/azure/cosmos-db/request-units) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-261">Pricing for Cosmos DB is based on storage used and [request units](/azure/cosmos-db/request-units) provisioned.</span></span> <span data-ttu-id="0caf1-262">Cosmos DB je nejvhodnější pro scénáře, které nevyžadují dotazy zahrnující agregaci přes velké sady dat, protože tyto dotazy vyžadují více jednotek požadavků než základní dotaz, jako je například poslední událost pro zařízení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-262">Cosmos DB is best for scenarios that do not require queries involving aggregation over large sets of data, as those queries require more request units than a basic query such as the last event for a device.</span></span>  

<span data-ttu-id="0caf1-263">[Microsoft Power BI](/power-bi/power-bi-overview?WT.mc_id=iotinsightssoln-docs-ercenk) je kolekce softwarových služeb, aplikací a konektorů, které společně usnadňují práci s nesouvisejícími zdroji dat, a to tak, aby byly souvislé, vizuálně atraktivní a interaktivní přehledy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-263">[Microsoft Power BI](/power-bi/power-bi-overview?WT.mc_id=iotinsightssoln-docs-ercenk) is a collection of software services, apps, and connectors that work together to turn your unrelated sources of data into coherent, visually immersive, and interactive insights.</span></span> <span data-ttu-id="0caf1-264">Power BI vám pomůže s informacemi, které jsou v dobrém stavu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-264">Power BI helps you stay up to date with the information that matters to you.</span></span> <span data-ttu-id="0caf1-265">Můžete využít [streamování v reálném čase v Power BI](/power-bi/service-real-time-streaming?WT.mc_id=iotinsightssoln-docs-ercenk) k odesílání dat do služby.</span><span class="sxs-lookup"><span data-stu-id="0caf1-265">You can utilize the [real-time streaming in Power BI](/power-bi/service-real-time-streaming?WT.mc_id=iotinsightssoln-docs-ercenk) to push data to the service.</span></span> <span data-ttu-id="0caf1-266">Tento datový proud v reálném čase může fungovat jako zdroj dat streamování v reálném čase pro různé vizuály na řídicím panelu Power BI.</span><span class="sxs-lookup"><span data-stu-id="0caf1-266">This real time stream can act as a real time streaming data source for various visuals on the Power BI dashboard.</span></span>

## <a name="cold-path"></a><span data-ttu-id="0caf1-267">Studená cesta</span><span class="sxs-lookup"><span data-stu-id="0caf1-267">Cold Path</span></span>

<span data-ttu-id="0caf1-268">Cesta pro teplu je místo, kde se při zpracování datového proudu objevují vzorce v průběhu času.</span><span class="sxs-lookup"><span data-stu-id="0caf1-268">The warm path is where the stream processing occurs to discover patterns over time.</span></span> <span data-ttu-id="0caf1-269">Chtěli bychom ale také vypočítat využití za určitou dobu v minulosti, s různými pivoty a agregacemi, jako je například Machine, line, závod, vyráběný Part Etcetera.</span><span class="sxs-lookup"><span data-stu-id="0caf1-269">However we also would like to calculate the utilization over a period of time in the past, with different pivots, and aggregations, such as machine, line, plant, produced part etcetera.</span></span> <span data-ttu-id="0caf1-270">Chceme tyto výsledky sloučit s výsledky teplé cesty, aby bylo možné uživateli prezentovat jednotné zobrazení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-270">We  want to merge those results with the warm path results to present a unified view to the user.</span></span> <span data-ttu-id="0caf1-271">Studená cesta zahrnuje dávkovou vrstvu a vrstvy obsluhy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-271">The cold path includes the batch layer and the serving layers.</span></span> <span data-ttu-id="0caf1-272">Kombinace poskytuje dlouhodobé zobrazení systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-272">The combination provides a long-term view of the system.</span></span>

<span data-ttu-id="0caf1-273">Studená cesta obsahuje dlouhodobé úložiště dat pro řešení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-273">The cold path contains the long-term data store for the solution.</span></span> <span data-ttu-id="0caf1-274">Obsahuje také dávkovou vrstvu, která vytváří předem vypočtená agregovaná zobrazení pro zajištění rychlých odpovědí na dotazy po dlouhou dobu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-274">It also contains the batch layer, which creates pre-calculated aggregate views to provide fast query responses over long periods of time.</span></span> <span data-ttu-id="0caf1-275">Možnosti technologie dostupné pro tuto vrstvu na platformě Azure jsou poměrně odlišné.</span><span class="sxs-lookup"><span data-stu-id="0caf1-275">The technology options available for this layer on Azure platform is quite diverse.</span></span>

![Architektura lambda: zvýrazní se dávková vrstva.](assets/extracting-insights-from-iot/lambda-3.png)
  
<span data-ttu-id="0caf1-277">[Azure Time Series Insights](/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) (TSI) je služba pro analýzy, ukládání a vizualizace pro data časových řad.</span><span class="sxs-lookup"><span data-stu-id="0caf1-277">[Azure Time Series Insights](/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) (TSI) is an analytics, storage and visualization service for time series data.</span></span> <span data-ttu-id="0caf1-278">Poskytuje filtrování a agregaci jako SQL, což řeší nutnost uživatelsky definovaných funkcí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-278">It provides SQL-like filtering and aggregation, alleviating the need for user-defined functions.</span></span> <span data-ttu-id="0caf1-279">TSI může přijímat data z Event Hubs, IoT Hub nebo úložiště objektů BLOB v Azure.</span><span class="sxs-lookup"><span data-stu-id="0caf1-279">TSI can receive data from Event Hubs, IoT Hub or Azure Blob storage.</span></span> <span data-ttu-id="0caf1-280">Všechna data v TSI jsou uložená v paměti a v SSD, která zajišťuje, že data jsou vždycky připravená pro interaktivní analýzy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-280">All data in TSI is stored in-memory and in SSDs, which ensures that the data is always ready for interactive analytics.</span></span> <span data-ttu-id="0caf1-281">Například typická agregace nad desítkami milionů událostí se vrátí v řádu milisekund.</span><span class="sxs-lookup"><span data-stu-id="0caf1-281">For example, a typical aggregation over tens of millions of events returns on the order of milliseconds.</span></span> <span data-ttu-id="0caf1-282">Poskytuje také vizualizace, jako jsou překryvy různých časových řad, porovnávání řídicích panelů, přístupná tabulková zobrazení a Heat mapy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-282">It also provides visualizations such as overlays of different time series, dashboard comparisons, accessible tabular views, and heat maps.</span></span> <span data-ttu-id="0caf1-283">Mezi klíčové funkce TSI patří:</span><span class="sxs-lookup"><span data-stu-id="0caf1-283">Key features of TSI include:</span></span>

- <span data-ttu-id="0caf1-284">Předdefinované služby vizualizace pro řešení, která nepotřebují přímo nahlásit data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-284">Built-in visualization services for solutions that do not need to report on data immediately.</span></span> <span data-ttu-id="0caf1-285">TSI má přibližnou latenci pro dotazování záznamů dat o 30-60 sekund.</span><span class="sxs-lookup"><span data-stu-id="0caf1-285">TSI has an approximate latency for querying data records of 30-60 seconds.</span></span> 
- <span data-ttu-id="0caf1-286">Možnost dotazování na velké sady dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-286">The ability to query large sets of data.</span></span>
- <span data-ttu-id="0caf1-287">Libovolný počet uživatelů může provádět neomezený počet dotazů bez dalších poplatků.</span><span class="sxs-lookup"><span data-stu-id="0caf1-287">Any number of users can conduct an unlimited number of queries for no extra cost.</span></span>

<span data-ttu-id="0caf1-288">V TSI je maximální doba uchování 400 dní a maximální limit úložiště je 3 TB.</span><span class="sxs-lookup"><span data-stu-id="0caf1-288">TSI has a maximum retention of 400 days and a maximum storage limit of 3 TB.</span></span> <span data-ttu-id="0caf1-289">Pokud vyžadujete delší dobu uchování nebo větší kapacitu, použijte studenou databázi úložiště (k výměně dat do TSI pro dotazování podle potřeby).</span><span class="sxs-lookup"><span data-stu-id="0caf1-289">If you require a longer retention span, or more capacity, use a cold storage database (swapping data into TSI for querying as needed).</span></span>

<span data-ttu-id="0caf1-290">Pro studený objem aplikace IoT se v průběhu času určité období výrazně zvětšuje.</span><span class="sxs-lookup"><span data-stu-id="0caf1-290">Cold storage for an IoT application is certain to grow large over time.</span></span> <span data-ttu-id="0caf1-291">Zde je místo, kde jsou data ukládána dlouhodobě a shrnuta v dávkových zobrazeních pro analýzu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-291">This is where data is stored for the long term and aggregated at the batch views for analytics.</span></span> <span data-ttu-id="0caf1-292">Data pro modely ML se také ukládají sem.</span><span class="sxs-lookup"><span data-stu-id="0caf1-292">Data for ML models is also stored here.</span></span> <span data-ttu-id="0caf1-293">Pro studené úložiště doporučujeme [Azure Storage](/azure/storage/?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-293">We recommend [Azure Storage](/azure/storage/?WT.mc_id=iotinsightssoln-docs-ercenk) for the cold storage.</span></span> <span data-ttu-id="0caf1-294">Je to služba spravovaná Microsoftem, která poskytuje vysoce dostupné, zabezpečené, odolné, škálovatelné a redundantní cloudové úložiště.</span><span class="sxs-lookup"><span data-stu-id="0caf1-294">It is a Microsoft-managed service providing cloud storage that is highly available, secure, durable, scalable, and redundant.</span></span> <span data-ttu-id="0caf1-295">Azure Storage zahrnuje objekty blob Azure (objekty), Azure Data Lake Storage Gen2, soubory Azure, fronty Azure a tabulky Azure.</span><span class="sxs-lookup"><span data-stu-id="0caf1-295">Azure Storage includes Azure Blobs (objects), Azure Data Lake Storage Gen2, Azure Files, Azure Queues, and Azure Tables.</span></span> <span data-ttu-id="0caf1-296">Studeným úložištěm můžou být objekty blob, Data Lake Storage Gen2 nebo tabulky Azure. nebo jejich kombinace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-296">The cold storage can be either Blobs, Data Lake Storage Gen2, or Azure Tables., or a combination of those.</span></span>

<span data-ttu-id="0caf1-297">[Azure Table Storage](/azure/cosmos-db/table-storage-overview?WT.mc_id=iotinsightssoln-docs-ercenk) je služba, která ukládá strukturovaná NoSQL data v cloudu a poskytuje úložiště klíčů a atributů s návrhem bez schématu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-297">[Azure Table storage](/azure/cosmos-db/table-storage-overview?WT.mc_id=iotinsightssoln-docs-ercenk) is a service that stores structured NoSQL data in the cloud, providing a key/attribute store with a schemaless design.</span></span> <span data-ttu-id="0caf1-298">Vzhledem k tomu, že Table Storage je bez schématu, je snadné přizpůsobit data podle potřeb vaší aplikace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-298">Because Table Storage is schemaless, it is easy to adapt your data as the needs of your application evolve.</span></span> <span data-ttu-id="0caf1-299">Přístup k Table Storage datům je rychlý a nákladově efektivní pro mnoho typů aplikací a obvykle se snižuje náklady než tradiční SQL pro podobné objemy dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-299">Access to Table Storage data is fast and cost-effective for many types of applications and is typically lower in cost than traditional SQL for similar volumes of data.</span></span> <span data-ttu-id="0caf1-300">Pro ukázky používáme jednu tabulku a jednu tabulku pro události, které jsou přijaté z datových proudů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-300">We use one table for samples, and one table for events that are received from data streams.</span></span> <span data-ttu-id="0caf1-301">Návrh klíče oddílu je obzvláště důležitý koncept; obě tabulky používají hodinu časového razítka události nebo ukázky.</span><span class="sxs-lookup"><span data-stu-id="0caf1-301">The design of the partition key is an especially important concept; both tables use the hour of the timestamp on the event or the sample.</span></span> <span data-ttu-id="0caf1-302">Další informace najdete v tématu [Vysvětlení datového modelu služby Table Storage](/rest/api/storageservices/Understanding-the-Table-Service-Data-Model?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-302">For more information, see [Understanding the Table Service Data Model](/rest/api/storageservices/Understanding-the-Table-Service-Data-Model?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="0caf1-303">Pro ukládání obrovských objemů nestrukturovaných dat, jako jsou JSON nebo dokumenty XML obsahující nezpracovaná data přijatá aplikací IoT, [úložiště objektů BLOB](/azure/storage/blobs/storage-blobs-introduction?WT.mc_id=iotinsightssoln-docs-ercenk), [soubory Azure](/azure/storage/files/storage-files-introduction?WT.mc_id=iotinsightssoln-docs-ercenk)nebo [Azure Data Lake Storage Gen2](/azure/storage/data-lake-storage/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) jsou nejlepší možností.</span><span class="sxs-lookup"><span data-stu-id="0caf1-303">To store massive amounts of unstructured data, such as JSON, or XML documents containing the unprocessed data received by the IoT application, [Blob storage](/azure/storage/blobs/storage-blobs-introduction?WT.mc_id=iotinsightssoln-docs-ercenk), [Azure Files](/azure/storage/files/storage-files-introduction?WT.mc_id=iotinsightssoln-docs-ercenk), or [Azure Data Lake Storage Gen2](/azure/storage/data-lake-storage/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) are the best options.</span></span>

<span data-ttu-id="0caf1-304">Služba Azure Blob Storage je k dispozici odkudkoli na světě prostřednictvím protokolu HTTP nebo HTTPS zabezpečeně.</span><span class="sxs-lookup"><span data-stu-id="0caf1-304">Azure Blob storage can be accessed from anywhere in the world via HTTP or HTTPS securely.</span></span> <span data-ttu-id="0caf1-305">Přístup k úložišti objektů BLOB musí být autorizovaný pomocí některého [autorizačního mechanismu](/azure/storage/common/storage-auth?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk) , který služba používá.</span><span class="sxs-lookup"><span data-stu-id="0caf1-305">Access to the blob storage must be authorized using one of the [authorization mechanisms](/azure/storage/common/storage-auth?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk) used by the service.</span></span> <span data-ttu-id="0caf1-306">Služba poskytuje více [možností](/azure/storage/common/storage-redundancy?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk)replikace: místně redundantní, zóna – redundantní, geograficky redundantní a přístup pro čtení geograficky redundantní.</span><span class="sxs-lookup"><span data-stu-id="0caf1-306">The service provides multiple replication [options](/azure/storage/common/storage-redundancy?toc=%2fazure%2fstorage%2fblobs%2ftoc.json?WT.mc_id=iotinsightssoln-docs-ercenk): locally redundant, zone-redundant, geo-redundant and read access geo-redundant.</span></span> <span data-ttu-id="0caf1-307">K dispozici jsou také tři [úrovně přístupu](/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=iotinsightssoln-docs-ercenk) , které umožňují nejefektivnější řešení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-307">There are also three [access tiers](/azure/storage/blobs/storage-blob-storage-tiers?WT.mc_id=iotinsightssoln-docs-ercenk) that allows the most cost-effective solutions.</span></span>

<span data-ttu-id="0caf1-308">Jakmile jsou data v studeném úložišti, je třeba vytvořit dávková zobrazení na vrstvě obsluhující architekturu lambda.</span><span class="sxs-lookup"><span data-stu-id="0caf1-308">Once the data is in cold storage, batch views on the serving layer of the Lambda architecture need to be created.</span></span> <span data-ttu-id="0caf1-309">[Azure Data Factory](/azure/data-factory/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) je skvělé řešení pro vytváření dávkových zobrazení ve vrstvě obsluhy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-309">[Azure Data Factory](/azure/data-factory/introduction?WT.mc_id=iotinsightssoln-docs-ercenk) is a great solution for creating the batch views on the serving layer.</span></span> <span data-ttu-id="0caf1-310">Jedná se o cloudovou službu pro integraci spravovaných dat, která umožňuje vytvářet pracovní postupy řízené daty v cloudu pro orchestraci a automatizaci přesunu dat a transformaci dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-310">It is a cloud-based managed data integration service that allows you to create data-driven workflows in the cloud for orchestrating and automating data movement and data transformation.</span></span> <span data-ttu-id="0caf1-311">Pomocí Azure Data Factory můžete vytvářet a plánovat [pracovní postupy řízené daty](/azure/data-factory/concepts-pipelines-activities?WT.mc_id=iotinsightssoln-docs-ercenk) (nazývané kanály), které mohou ingestovat data z různorodých úložišť dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-311">Using Azure Data Factory, you can create and schedule [data-driven workflows](/azure/data-factory/concepts-pipelines-activities?WT.mc_id=iotinsightssoln-docs-ercenk) (called pipelines) that can ingest data from disparate data stores.</span></span> <span data-ttu-id="0caf1-312">Může zpracovávat a transformovat data pomocí služeb, jako jsou [Azure HDInsight Hadoop](/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk), [Spark](/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk)a [Azure Databricks](/azure/azure-databricks/?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-312">It can process and transform the data by using services such as [Azure HDInsight Hadoop](/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk), [Spark](/azure/hdinsight/?WT.mc_id=iotinsightssoln-docs-ercenk), and [Azure Databricks](/azure/azure-databricks/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-313">To vám umožní sestavovat modely strojového učení a spotřebovávat je s využitím klientů Analytics.</span><span class="sxs-lookup"><span data-stu-id="0caf1-313">This allows you to build machine learning models and consume them with the analytics clients.</span></span>

<span data-ttu-id="0caf1-314">Například, jak je znázorněno na následujícím obrázku, Data Factory kanály čtou data z hlavního úložiště dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-314">For example, as shown in the following figure, Data Factory pipelines read data from the master data store.</span></span> <span data-ttu-id="0caf1-315">Jeden kanál shrnuje a agreguje data k naplnění instance služby Azure Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="0caf1-315">One pipeline summarizes and aggregates the data to populate an instance of Azure Data Warehouse.</span></span> <span data-ttu-id="0caf1-316">Kanál Data Factory také obsahuje [Azure Databricks aktivity poznámkového bloku](/azure/data-factory/transform-data-using-databricks-notebook?WT.mc_id=iotinsightssoln-docs-ercenk) , které se používají k sestavení modelů ml.</span><span class="sxs-lookup"><span data-stu-id="0caf1-316">The Data Factory pipeline also and contains [Azure Databricks notebook activities](/azure/data-factory/transform-data-using-databricks-notebook?WT.mc_id=iotinsightssoln-docs-ercenk) that are used to build ML models.</span></span>

![Architektura lambda: zvýrazní se dávková vrstva.](assets/extracting-insights-from-iot/master-data-to-ml-analytics.png)
  
<span data-ttu-id="0caf1-318">Nejlepší možností pro hostování zobrazení Batch jsou [Azure SQL Database](/azure/sql-database/?WT.mc_id=iotinsightssoln-docs-ercenk) nebo [Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-318">[Azure SQL Database](/azure/sql-database/?WT.mc_id=iotinsightssoln-docs-ercenk) or [Azure SQL Data Warehouse](/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is?WT.mc_id=iotinsightssoln-docs-ercenk) are the best options for hosting the batch views.</span></span> <span data-ttu-id="0caf1-319">Tyto služby mohou sloužit předem vypočítané a agregované pohledy na hlavní data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-319">These services can serve pre-calculated and aggregated views on the master data.</span></span> 

<span data-ttu-id="0caf1-320">Azure SQL Database (SQL DB) je relační databáze jako služba založená na nejnovější verzi služby Microsoft SQL Server Database Engine.</span><span class="sxs-lookup"><span data-stu-id="0caf1-320">Azure SQL Database (SQL DB) is a relational database-as-a-service based on the latest version of Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="0caf1-321">SQL DB je vysoce výkonná, spolehlivá a zabezpečená databáze, kterou můžete použít k vytváření aplikací a webů řízených daty.</span><span class="sxs-lookup"><span data-stu-id="0caf1-321">SQL DB is a high-performance, reliable, and secure database you can use to build data-driven applications and websites.</span></span> <span data-ttu-id="0caf1-322">Jako služba Azure není nutné spravovat infrastrukturu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-322">As an Azure service,  there is no need to manage its infrastructure.</span></span> <span data-ttu-id="0caf1-323">Jak se zvyšuje objem dat, může řešení začít používat techniky k agregaci a ukládání dat pro urychlení dotazů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-323">As the data volume increases, the solution can start using techniques to aggregate and store data for speeding up the queries.</span></span> <span data-ttu-id="0caf1-324">Předem vypočítané agregace jsou dobře známou technikou, zejména pro připojená data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-324">Pre-calculating aggregations is a well-known technique, especially for append-only data.</span></span> <span data-ttu-id="0caf1-325">Je to také užitečné pro správu nákladů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-325">It is also useful for managing costs.</span></span>

<span data-ttu-id="0caf1-326">Azure SQL Data Warehouse poskytuje mnoho dalších funkcí, které mohou být užitečné v některých scénářích.</span><span class="sxs-lookup"><span data-stu-id="0caf1-326">Azure SQL Data Warehouse provides many additional features that can be useful in some scenarios.</span></span> <span data-ttu-id="0caf1-327">Jedná se o cloudový podnikový datový sklad, který využívá výkonné paralelní zpracování k rychlému spouštění složitých dotazů napříč petabajty dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-327">It is a cloud-based enterprise data warehouse that leverages massively parallel processing  to quickly run complex queries across petabytes of data.</span></span> <span data-ttu-id="0caf1-328">Pokud potřebujete zachovat petabajty dat a chcete, aby dotazy běžely rychle, doporučujeme SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="0caf1-328">If you need to keep petabytes of data, and want to have queries running fast, we recommend SQL Data Warehouse.</span></span>

## <a name="visualizing-the-data"></a><span data-ttu-id="0caf1-329">Vizualizace dat</span><span class="sxs-lookup"><span data-stu-id="0caf1-329">Visualizing the data</span></span>

<span data-ttu-id="0caf1-330">V této vrstvě chceme sloučit dva datové kanály (teplé a studené cesty), aby se zobrazily soudržný pohled na data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-330">At this layer, we want to merge the two data pipelines (warm and cold paths) to present a cohesive view of the data.</span></span> <span data-ttu-id="0caf1-331">V tomto příkladu jsme použili více metrik pro odvození využití počítače na teplé i studené cestě.</span><span class="sxs-lookup"><span data-stu-id="0caf1-331">In this example, we used multiple metrics to deduce the utilization of the machine on both warm and cold paths.</span></span> <span data-ttu-id="0caf1-332">Ve fázi analýzy poskytujeme vizualizace, které kombinují data z těchto cest.</span><span class="sxs-lookup"><span data-stu-id="0caf1-332">In the analytics stage, we provide visualizations that combine the data from those paths.</span></span>

![Architektura lambda: Zvýrazněná vrstva klienti Analytics.](assets/extracting-insights-from-iot/lambda-4.png)

<span data-ttu-id="0caf1-334">[Microsoft Power BI](/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk) a [Azure Time Series Insights](/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) poskytují vizualizace dat předem.</span><span class="sxs-lookup"><span data-stu-id="0caf1-334">[Microsoft Power BI](/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk) and [Azure Time Series Insights](/azure/time-series-insights/?WT.mc_id=iotinsightssoln-docs-ercenk) provide data visualizations out-of-the-box.</span></span> <span data-ttu-id="0caf1-335">Power BI je řešení obchodní analýzy, které umožňuje vizualizovat vaše data a sdílet přehledy napříč vaší organizací nebo je vkládat do vaší aplikace nebo webu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-335">Power BI is business analytics solution that lets you visualize your data and share insights across your organization, or embed them in your app or website.</span></span> <span data-ttu-id="0caf1-336">[Power BI Desktop](https://powerbi.microsoft.com/desktop/?WT.mc_id=iotinsightssoln-docs-ercenk) je bezplatný a výkonný nástroj pro sestavy modelování a jejich podkladové zdroje dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-336">[Power BI Desktop](https://powerbi.microsoft.com/desktop/?WT.mc_id=iotinsightssoln-docs-ercenk) is a free and powerful tool for modelling reports and their underlying data sources.</span></span>  <span data-ttu-id="0caf1-337">Aplikace, které vkládá Power BI vizualizace, používají sestavy vytvořené nástrojem Desktop a hostované ve službě Power BI.</span><span class="sxs-lookup"><span data-stu-id="0caf1-337">The applications embedding Power BI visualizations use the reports authored by the desktop tool and hosted on the Power BI Service.</span></span>

<span data-ttu-id="0caf1-338">Time Series Insights má Průzkumník dat k vizualizaci a dotazování dat i rozhraní REST API pro dotazy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-338">Time Series Insights has a data explorer to visualize and query data as well as REST query APIs.</span></span> <span data-ttu-id="0caf1-339">Dále zpřístupňuje knihovnu ovládacích prvků JavaScriptu, která umožňuje vkládat grafy založené na TSI do vlastních aplikací.</span><span class="sxs-lookup"><span data-stu-id="0caf1-339">Further, it exposes a JavaScript controls library that lets you embed TSI-powered charts into custom applications.</span></span> <span data-ttu-id="0caf1-340">Toto je základní heatmapu zobrazení na TSI pro příchozí data, která se blíží využití počítačů v dílně, a to tak, že jednoduše prohlížíte počet pozorovaných ukázek.</span><span class="sxs-lookup"><span data-stu-id="0caf1-340">The following is a basic heatmap view on the TSI for the incoming data that approximates the utilization of the machines on the shop floor, by simply looking at the number of samples observed.</span></span>

![Architektura lambda: zvýrazní se dávková vrstva.](assets/extracting-insights-from-iot/client-screen.png)

<span data-ttu-id="0caf1-342">Pokud vyžadujete uživatelské rozhraní založené na prohlížeči, které agreguje data z více zdrojů, musí obě tyto služby a služby Power BI umožňovat vkládání ovládacích prvků vizualizace.</span><span class="sxs-lookup"><span data-stu-id="0caf1-342">If you require a browser-based user interface that aggregates data from multiple sources, both TSI and Power BI services allow embedding visualization controls.</span></span> <span data-ttu-id="0caf1-343">Zároveň poskytují rozhraní REST API ([Power BI rozhraní REST API](/rest/api/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI REST API](/rest/api/time-series-insights/time-series-insights-reference-queryapi?WT.mc_id=iotinsightssoln-docs-ercenk)) a sady JavaScript SDK ([Power BI JavaScript SDK](https://github.com/Microsoft/PowerBI-JavaScript?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI JavaScript SDK](/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)), které umožňují rozsáhlé přizpůsobení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-343">Both also provide REST APIs ([Power BI Rest API](/rest/api/power-bi/?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI REST API](/rest/api/time-series-insights/time-series-insights-reference-queryapi?WT.mc_id=iotinsightssoln-docs-ercenk)) and JavaScript SDKs ([Power BI JavaScript SDK](https://github.com/Microsoft/PowerBI-JavaScript?WT.mc_id=iotinsightssoln-docs-ercenk), [TSI JavaScript SDK](/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)) that allows extensive customizations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0caf1-344">Další kroky</span><span class="sxs-lookup"><span data-stu-id="0caf1-344">Next Steps</span></span>

<span data-ttu-id="0caf1-345">Pokryli jsme spoustu konceptů a chtěli bychom dát čtenářům sadu výchozích bodů pro další informace a použít techniky na jejich vlastní požadavky.</span><span class="sxs-lookup"><span data-stu-id="0caf1-345">We covered a lot of concepts and would like to give the reader a set of starting points to learn more and apply the techniques to their own requirements.</span></span> <span data-ttu-id="0caf1-346">Tady je několik kurzů, které se domníváme, že pro tento účel může být užitečné.</span><span class="sxs-lookup"><span data-stu-id="0caf1-346">Here are some tutorials we believe can be useful for this purpose.</span></span>

- <span data-ttu-id="0caf1-347">Převod dat na datový proud</span><span class="sxs-lookup"><span data-stu-id="0caf1-347">Converting the data to a stream</span></span>
  - [<span data-ttu-id="0caf1-348">Vytvoření aplikace logiky spuštěné podle plánu</span><span class="sxs-lookup"><span data-stu-id="0caf1-348">Creating a Logic App running on a schedule</span></span>](/azure/logic-apps/tutorial-build-schedule-recurring-logic-app-workflow?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="0caf1-349">Příklady kódu pro datové operace na Logic Apps</span><span class="sxs-lookup"><span data-stu-id="0caf1-349">Code examples for data operations on Logic Apps</span></span>](/azure/logic-apps/logic-apps-data-operations-code-samples?WT.mc_id=iotinsightssoln-docs-ercenk)
  - <span data-ttu-id="0caf1-350">[Spuštění Azure Functions v kontejneru](/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=iotinsightssoln-docs-ercenk) pro hostování vaší funkce Azure Functions je pokryto na více místech.</span><span class="sxs-lookup"><span data-stu-id="0caf1-350">[Running Azure Functions in a container](/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=iotinsightssoln-docs-ercenk) to host your Azure Function is covered in multiple places.</span></span> <span data-ttu-id="0caf1-351">Vytvoření funkce na platformě Linux s použitím vlastní image, spuštění funkcí na libovolné platformě, imagí Docker pro Modul runtime služby Azure Functions</span><span class="sxs-lookup"><span data-stu-id="0caf1-351">Creating a function on Linux using a custom image, running functions on any platform, Docker images for Azure Functions Runtime</span></span>
  - [<span data-ttu-id="0caf1-352">Používání různých vazeb na Azure Functions</span><span class="sxs-lookup"><span data-stu-id="0caf1-352">Using various bindings on Azure Functions</span></span>](/azure/azure-functions/functions-triggers-bindings?WT.mc_id=iotinsightssoln-docs-ercenk)

- <span data-ttu-id="0caf1-353">Kritická cesta</span><span class="sxs-lookup"><span data-stu-id="0caf1-353">Hot path</span></span>
  - <span data-ttu-id="0caf1-354">Kompletní kurzy, které demonstrují použití Event Hubs, Azure Stream Analytics a Power BI.</span><span class="sxs-lookup"><span data-stu-id="0caf1-354">End-to-end tutorials demonstrating the use of Event Hubs, Azure Stream Analytics and Power BI.</span></span> <span data-ttu-id="0caf1-355">Viz [kurz: vizualizace anomálií dat](/azure/event-hubs/event-hubs-tutorial-visualize-anomalies?WT.mc_id=iotinsightssoln-docs-ercenk) v reálném čase odeslaných do Azure Event Hubs a [Vytvoření úlohy Stream Analytics k analýze dat telefonních hovorů](/azure/stream-analytics/stream-analytics-manage-job?WT.mc_id=iotinsightssoln-docs-ercenk) a vizualizaci výsledků na Power BIovém řídicím panelu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-355">See [Tutorial: Visualize data anomalies](/azure/event-hubs/event-hubs-tutorial-visualize-anomalies?WT.mc_id=iotinsightssoln-docs-ercenk) in real-time events sent to Azure Event Hubs, and [Create a Stream Analytics job to analyze phone call data](/azure/stream-analytics/stream-analytics-manage-job?WT.mc_id=iotinsightssoln-docs-ercenk) and visualize results in a Power BI dashboard.</span></span>
  <span data-ttu-id="0caf1-356">-[používání Azure Cosmos DB s .NET](/azure/cosmos-db/sql-api-get-started?WT.mc_id=iotinsightssoln-docs-ercenk)</span><span class="sxs-lookup"><span data-stu-id="0caf1-356">-[Using Azure Cosmos DB with .NET](/azure/cosmos-db/sql-api-get-started?WT.mc_id=iotinsightssoln-docs-ercenk)</span></span>
- <span data-ttu-id="0caf1-357">Studená cesta</span><span class="sxs-lookup"><span data-stu-id="0caf1-357">Cold path</span></span>
  - <span data-ttu-id="0caf1-358">[Transformace dat v cloudu pomocí aktivity Sparku](/azure/data-factory/tutorial-transform-data-spark-portal?WT.mc_id=iotinsightssoln-docs-ercenk) v Azure Data Factory</span><span class="sxs-lookup"><span data-stu-id="0caf1-358">[Transforming data in the cloud by using a Spark activity](/azure/data-factory/tutorial-transform-data-spark-portal?WT.mc_id=iotinsightssoln-docs-ercenk) in Azure Data Factory</span></span>
  - [<span data-ttu-id="0caf1-359">Kurz: Vytvoření prostředí Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="0caf1-359">Tutorial: Create an Azure Time Series Insights environment</span></span>](/azure/time-series-insights/tutorial-create-populate-tsi-environment?WT.mc_id=iotinsightssoln-docs-ercenk)
- <span data-ttu-id="0caf1-360">Klienti analýzy</span><span class="sxs-lookup"><span data-stu-id="0caf1-360">Analysis clients</span></span>
  - [<span data-ttu-id="0caf1-361">Power BI výuky</span><span class="sxs-lookup"><span data-stu-id="0caf1-361">Learning Power BI</span></span>](/power-bi/guided-learning/?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="0caf1-362">Vytváření Time Series Insights SPA</span><span class="sxs-lookup"><span data-stu-id="0caf1-362">Creating a Time Series Insights SPA</span></span>](/azure/time-series-insights/tutorial-create-tsi-sample-spa?WT.mc_id=iotinsightssoln-docs-ercenk)
  - [<span data-ttu-id="0caf1-363">Prozkoumávání Time Series Insights klientské knihovny Java Script</span><span class="sxs-lookup"><span data-stu-id="0caf1-363">Exploring Time Series Insights Java Script client library</span></span>](/azure/time-series-insights/tutorial-explore-js-client-lib?WT.mc_id=iotinsightssoln-docs-ercenk)
  - <span data-ttu-id="0caf1-364">Podívejte se na ukázku a ukázku [Power BI](https://microsoft.github.io/PowerBI-JavaScript/demo/v2-demo/index.html)pro [TSI](https://insights.timeseries.azure.com/demo) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-364">See the [TSI demo](https://insights.timeseries.azure.com/demo) and [Power BI demo](https://microsoft.github.io/PowerBI-JavaScript/demo/v2-demo/index.html).</span></span>

## <a name="appendix-pillars-of-software-quality-posq"></a><span data-ttu-id="0caf1-365">Příloha: pilíře kvality softwaru (PoSQ)</span><span class="sxs-lookup"><span data-stu-id="0caf1-365">Appendix: Pillars of software quality (PoSQ)</span></span>

<span data-ttu-id="0caf1-366">Úspěšná cloudová aplikace je postavená na těchto [pilířích kvality softwaru](/azure/architecture/guide/pillars?WT.mc_id=iotinsightssoln-docs-ercenk): škálovatelnost, dostupnost, odolnost, Správa a zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-366">A successful cloud application is built on these [pillars of software quality](/azure/architecture/guide/pillars?WT.mc_id=iotinsightssoln-docs-ercenk): Scalability, availability, resiliency, management, and security.</span></span> <span data-ttu-id="0caf1-367">V této části stručně pokryjeme tyto pilíře pro každou komponentu podle potřeby.</span><span class="sxs-lookup"><span data-stu-id="0caf1-367">In this section, we will briefly cover those pillars for each component as necessary.</span></span> <span data-ttu-id="0caf1-368">Nepokrýváme dostupnost, odolnost, správu a DevOps, protože jsou většinou řešeny na úrovni implementace a chceme zmínit platformu Azure, která poskytuje rozsáhlé prostředky pro dosahování rozhraní API, nástrojů, diagnostiky a protokolování.</span><span class="sxs-lookup"><span data-stu-id="0caf1-368">We don’t cover availability, resiliency, management and DevOps, since they are mostly addressed at the implementation level, and we want to mention Azure platform provides extensive means for achieving those through APIs, tools, diagnostics and logging.</span></span> <span data-ttu-id="0caf1-369">Kromě uvedených pilířů také uvádíme cenovou efektivitu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-369">In addition to the mentioned pillars, we will also mention cost efficiency.</span></span>

<span data-ttu-id="0caf1-370">Pojďme se rychle podívat na tyto pilíře:</span><span class="sxs-lookup"><span data-stu-id="0caf1-370">Let’s quickly review those pillars:</span></span>

- <span data-ttu-id="0caf1-371">**Škálovatelnost** je schopnost systému zvládnout zvýšené zatížení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-371">**Scalability** is the ability of a system to handle increased load.</span></span> <span data-ttu-id="0caf1-372">Aplikaci je možné škálovat dvěma hlavními způsoby.</span><span class="sxs-lookup"><span data-stu-id="0caf1-372">There are two main ways that an application can scale.</span></span> <span data-ttu-id="0caf1-373">Vertikální škálování (vertikální škálování) znamená zvýšení kapacity prostředku, například pomocí větší velikosti virtuálního počítače.</span><span class="sxs-lookup"><span data-stu-id="0caf1-373">Vertical scaling (scaling up) means increasing the capacity of a resource, for example by using a larger VM size.</span></span> <span data-ttu-id="0caf1-374">Horizontální škálování (horizontální navýšení kapacity) přidává nové instance prostředku, například virtuální počítače nebo repliky databáze.</span><span class="sxs-lookup"><span data-stu-id="0caf1-374">Horizontal scaling (scaling out) is adding new instances of a resource, such as VMs or database replicas.</span></span> <span data-ttu-id="0caf1-375">Pilíř škálovatelnosti také zahrnuje výkon a schopnost zpracovávat zatížení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-375">The scalability pillar also includes performance and the ability to handle load.</span></span>
- <span data-ttu-id="0caf1-376">**Dostupnost** je poměr doby, po kterou je systém funkční a funguje.</span><span class="sxs-lookup"><span data-stu-id="0caf1-376">**Availability** is the proportion of time that the system is functional and working.</span></span> <span data-ttu-id="0caf1-377">Obvykle se měří jako procento doby provozu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-377">It is usually measured as a percentage of uptime.</span></span> <span data-ttu-id="0caf1-378">Dostupnost mohou snížit chyby aplikace, problémy s infrastrukturou nebo zátěž systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-378">Application errors, infrastructure problems, and system load can all reduce availability.</span></span> <span data-ttu-id="0caf1-379">Smlouvy o úrovni služeb pro Microsoft Azure Services se zveřejňují a k dispozici na [smlouvách o úrovni služeb](https://azure.microsoft.com/support/legal/sla/?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-379">The service level agreements for Microsoft Azure services are published and available at [Service Level Agreements](https://azure.microsoft.com/support/legal/sla/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-380">Dostupnost je jediná smysluplná metrika na úrovni systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-380">Availability is the only meaningful metric at the system level.</span></span> <span data-ttu-id="0caf1-381">Samostatné komponenty přispívají k celkové dostupnosti systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-381">Separate components contribute to the overall availability of the system.</span></span>
- <span data-ttu-id="0caf1-382">**Odolnost** proti chybám je schopnost systému obnovit selhání a nadále fungovat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-382">**Resiliency** is the ability of the system to recover from failures and continue to function.</span></span> <span data-ttu-id="0caf1-383">Cílem odolnosti proti chybám je obnovení plně funkčního stavu aplikace co nejdříve po selhání.</span><span class="sxs-lookup"><span data-stu-id="0caf1-383">The goal of resiliency is to return the application to a fully functioning state after a failure occurs.</span></span> <span data-ttu-id="0caf1-384">Odolnost proti chybám úzce souvisí s dostupností.</span><span class="sxs-lookup"><span data-stu-id="0caf1-384">Resiliency is closely related to availability.</span></span>
- <span data-ttu-id="0caf1-385">**Správa a DevOps**.</span><span class="sxs-lookup"><span data-stu-id="0caf1-385">**Management and DevOps**.</span></span> <span data-ttu-id="0caf1-386">Do tohoto pilíře patří provozní procesy, které udržují aplikaci spuštěnou v produkčním prostředí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-386">This pillar covers the operations processes that keep an application running in production.</span></span> <span data-ttu-id="0caf1-387">Nasazení musí být spolehlivá a předvídatelná.</span><span class="sxs-lookup"><span data-stu-id="0caf1-387">Deployments must be reliable and predictable.</span></span> <span data-ttu-id="0caf1-388">Měla by být automatizovaná, aby se snížilo riziko lidské chyby.</span><span class="sxs-lookup"><span data-stu-id="0caf1-388">They should be automated to reduce the chance of human error.</span></span> <span data-ttu-id="0caf1-389">Mělo by se jednat o rychlý a rutinní proces, aby nedošlo ke zpomalení vydání nových funkcí nebo oprav chyb.</span><span class="sxs-lookup"><span data-stu-id="0caf1-389">They should be a fast and routine process, so they do not slow down the release of new features or bug fixes.</span></span> <span data-ttu-id="0caf1-390">Stejně důležité je, abyste v případě problémů s aktualizací mohli rychle vrátit změny nebo se posunout vpřed.</span><span class="sxs-lookup"><span data-stu-id="0caf1-390">Equally important, you must be able to quickly roll back or roll forward if an update has problems.</span></span>
- <span data-ttu-id="0caf1-391">**Zabezpečení** by mělo být hlavním detailním bodem v celém životním cyklu řešení, od návrhu a implementace po nasazení a provoz.</span><span class="sxs-lookup"><span data-stu-id="0caf1-391">**Security** should be a major focus point throughout the entire lifecycle of a solution, from design and implementation to deployment and operations.</span></span> <span data-ttu-id="0caf1-392">Správa identit, ochrana vaší infrastruktury, zabezpečení aplikací, autorizace, svrchovanost a šifrování dat, auditování jsou všechny široké oblasti, které je potřeba řešit.</span><span class="sxs-lookup"><span data-stu-id="0caf1-392">Identity management, protecting your infrastructure, application security, authorization, data sovereignty and encryption, auditing are all broad areas that need to be addressed.</span></span>

## <a name="posq-converting-the-data-to-a-stream"></a><span data-ttu-id="0caf1-393">PoSQ: převod dat na datový proud</span><span class="sxs-lookup"><span data-stu-id="0caf1-393">PoSQ: Converting the data to a stream</span></span>

<span data-ttu-id="0caf1-394">**Škálovatelnost**: můžeme se dořešit ke škálovatelnosti ze dvou perspektiv.</span><span class="sxs-lookup"><span data-stu-id="0caf1-394">**Scalability**: We can approach the scalability from two perspectives.</span></span> <span data-ttu-id="0caf1-395">Nejprve z perspektivy komponenty, od perspektivy systému, který poskytuje zdrojová data.</span><span class="sxs-lookup"><span data-stu-id="0caf1-395">First, from the perspective of the component, second, from the perspective of the system that provides the source data.</span></span>

<span data-ttu-id="0caf1-396">Každá služba Azure poskytuje možnosti pro vertikální i horizontální škálování.</span><span class="sxs-lookup"><span data-stu-id="0caf1-396">Each Azure service provides options for vertical and horizontal scaling.</span></span> <span data-ttu-id="0caf1-397">Důrazně doporučujeme zvážit požadavky na škálovatelnost při návrhu řešení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-397">We strongly recommend considering the scalability requirements while designing the solution.</span></span>

<span data-ttu-id="0caf1-398">Stejně jako u systémů, které poskytují zdrojová data, musíme pečlivě vycházet z neúspěchu systému a v podstatě způsobovat útok DoS (Denial of Service) v systému, protože ho často dotazuje.</span><span class="sxs-lookup"><span data-stu-id="0caf1-398">As for the systems providing the source data, we need to be careful about not to overwhelm the system, and basically causing a denial of service (DoS) attack on the system, by querying it too frequently.</span></span> <span data-ttu-id="0caf1-399">Pokud se systém dotazuje do systému, měli byste mít na paměti, že úprava četnosti cyklického dotazování má dva účinky, členitost dat (častěji se dotazuje na v reálném čase) a zatížení vytvořené ve vzdáleném systému.</span><span class="sxs-lookup"><span data-stu-id="0caf1-399">If you are polling the system, you should keep in mind that adjusting the polling frequency has two effects, the granularity of the data (the more often you query, the closer it gets to real-time) and the load created on the remote system.</span></span>

<span data-ttu-id="0caf1-400">**Zabezpečení**: Pokud k vzdálenému systému přistupovali symetrický nebo asymetrický klíč, doporučujeme, abyste si tajných kódů zanechali [Azure Key Vault](/azure/key-vault/?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-400">**Security**: If the remote system is accessed by symmetrical or asymmetrical keys, we recommend the secrets to be kept in [Azure Key Vault](/azure/key-vault/?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

## <a name="posq-warm-path"></a><span data-ttu-id="0caf1-401">PoSQ: cesta k teplu</span><span class="sxs-lookup"><span data-stu-id="0caf1-401">PoSQ: Warm path</span></span>

<span data-ttu-id="0caf1-402">**Škálovatelnost**: Pokud je Azure Event Hubs v subsystému pro přijímání, je hlavním mechanismem škálovatelnosti [jednotky propustnosti](/azure/event-hubs/event-hubs-features#throughput-units?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-402">**Scalability**: If Azure Event Hubs is the used in the ingestion subsystem, the main scalability mechanism is [throughput units](/azure/event-hubs/event-hubs-features#throughput-units?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-403">Event Hubs poskytují možnost nastavení jednotek propustnosti staticky nebo pomocí [funkce automatického rozplochení](/azure/event-hubs/event-hubs-auto-inflate?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-403">Event Hubs provide the capability of setting the throughput units statically, or through the [auto-inflate feature](/azure/event-hubs/event-hubs-auto-inflate?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="0caf1-404">[Jednotky streamování](/azure/stream-analytics/stream-analytics-streaming-unit-consumption?WT.mc_id=iotinsightssoln-docs-ercenk) (SUs) v Stream Analytics představují výpočetní prostředky, které jsou přiděleny ke spuštění úlohy.</span><span class="sxs-lookup"><span data-stu-id="0caf1-404">[Streaming Units](/azure/stream-analytics/stream-analytics-streaming-unit-consumption?WT.mc_id=iotinsightssoln-docs-ercenk) (SUs) in Stream Analytics represent the computing resources that are allocated to execute a job.</span></span> <span data-ttu-id="0caf1-405">Čím vyšší je počet SU, tím více prostředků CPU a paměti se úloze přidělí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-405">The higher the number of SUs, the more CPU and memory resources are allocated for your job.</span></span> <span data-ttu-id="0caf1-406">Tato kapacita vám umožní soustředit se na logiku dotazů a abstrakce nutnosti spravovat hardware a včas spouštět úlohy Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="0caf1-406">This capacity lets you focus on the query logic and abstracts the need to manage the hardware to run your Stream Analytics job in a timely manner.</span></span> <span data-ttu-id="0caf1-407">Kromě služby SUs je velmi důležité, aby je bylo možné efektivně využívat prostřednictvím [virtuálního dotazů](/azure/stream-analytics/stream-analytics-scale-jobs?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-407">In addition to SUs, making efficient use of them through [properly parallelizing the queries](/azure/stream-analytics/stream-analytics-scale-jobs?WT.mc_id=iotinsightssoln-docs-ercenk) is crucial.</span></span>

<span data-ttu-id="0caf1-408">Implementace Azure Cosmos DB musí být zřízené se správnými parametry propustnosti a řádným návrhem dělení.</span><span class="sxs-lookup"><span data-stu-id="0caf1-408">Azure Cosmos DB implementations need to be provisioned with the right throughput parameters and proper partitioning design.</span></span> <span data-ttu-id="0caf1-409">Zajištění propustnosti je k dispozici na kontejneru nebo na úrovni základu dat a vyjádřeno v [jednotkách žádosti](/azure/cosmos-db/request-units?WT.mc_id=iotinsightssoln-docs-ercenk) (ru).</span><span class="sxs-lookup"><span data-stu-id="0caf1-409">Provisioning the throughput is available at the container or the data base level, and expressed in [Request Units](/azure/cosmos-db/request-units?WT.mc_id=iotinsightssoln-docs-ercenk) (RUs).</span></span> <span data-ttu-id="0caf1-410">Cosmos DB poskytuje nástroj k odhadování ru.</span><span class="sxs-lookup"><span data-stu-id="0caf1-410">Cosmos DB provides a tool for estimating the RUs.</span></span> <span data-ttu-id="0caf1-411">Kromě zřízení propustnosti je [efektivní rozdělit do oddílů databáze](/azure/cosmos-db/partition-data?WT.mc_id=iotinsightssoln-docs-ercenk) klíč.</span><span class="sxs-lookup"><span data-stu-id="0caf1-411">In addition to provisioning the throughput, [efficiently partitioning the database](/azure/cosmos-db/partition-data?WT.mc_id=iotinsightssoln-docs-ercenk) is key.</span></span>

<span data-ttu-id="0caf1-412">**Zabezpečení**: přístup k Azure Event Hubs klienty je kombinací kombinace tokenů sdíleného přístupového podpisu (SAS) a vydavatelů událostí pro ověřování klientů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-412">**Security**: Access to Azure Event Hubs by clients is through a combination of Shared Access Signature (SAS) tokens and event publishers for client authentication.</span></span> <span data-ttu-id="0caf1-413">Zabezpečení pro back-endové aplikace se řídí stejnými koncepty jako Service Bus témata.</span><span class="sxs-lookup"><span data-stu-id="0caf1-413">The security for back-end applications follow the same concepts as the Service Bus topics.</span></span> <span data-ttu-id="0caf1-414">Podrobný popis modelu zabezpečení Event Hubs je v [přehledu Event Hubsho ověřování a modelu zabezpečení](/azure/event-hubs/event-hubs-authentication-and-security-model-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-414">A thorough description of the Event Hubs security model is in the [Event Hubs authentication and security model overview](/azure/event-hubs/event-hubs-authentication-and-security-model-overview?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="0caf1-415">Zabezpečení Cosmos DB databází zajišťuje řízený přístup k datům a šifrování v klidovém umístění.</span><span class="sxs-lookup"><span data-stu-id="0caf1-415">Securing the Cosmos DB databases provides controlled access to the data, and encryption at rest.</span></span> <span data-ttu-id="0caf1-416">Další informace najdete v tématu [Azure Cosmos DB zabezpečení databáze](/azure/cosmos-db/database-security?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-416">For more information, see [Azure Cosmos DB database security](/azure/cosmos-db/database-security?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="0caf1-417">**Nákladová efektivita**: ceny Event Hubs jsou funkcí SKU (Standard nebo Premium) a miliony přijatých událostí a jednotky propustnosti.</span><span class="sxs-lookup"><span data-stu-id="0caf1-417">**Cost Efficiency**: The pricing of Event Hubs is a function of the SKU (standard or premium), and the millions of events received, plus throughput units.</span></span> <span data-ttu-id="0caf1-418">Optimální kombinaci je možné dosáhnout tak, že si prohlížíte rychlost přijímání dat, která je určena příchozími zprávami.</span><span class="sxs-lookup"><span data-stu-id="0caf1-418">The optimum combination can be achieved by looking at the data ingest rate that is dictated by the incoming messages.</span></span>

<span data-ttu-id="0caf1-419">Při použití Cosmos DB doporučujeme, abyste procházeli optimálním využitím obchodu prostřednictvím použití RU.</span><span class="sxs-lookup"><span data-stu-id="0caf1-419">When using Cosmos DB, we recommend observing the most optimum use of the store through the RU utilization.</span></span> <span data-ttu-id="0caf1-420">Cosmos DB má také funkci pro řízení uchovávání dat, jak jsme uvedli dříve, doporučujeme použít tuto funkci k řízení času, kdy záznamy zůstanou v databázi, a tím řízení velikosti databáze.</span><span class="sxs-lookup"><span data-stu-id="0caf1-420">Cosmos DB also has a feature for controlling data retention, as we stated earlier, we recommend using the feature to control the time the records stay in the database, thus controlling the database size.</span></span>

## <a name="posq-cold-path"></a><span data-ttu-id="0caf1-421">PoSQ: studená cesta</span><span class="sxs-lookup"><span data-stu-id="0caf1-421">PoSQ: Cold path</span></span>

<span data-ttu-id="0caf1-422">**Škálovatelnost**: Azure Time Series Insights (TSI) se škáluje pomocí metriky s názvem "Capacity" (kapacita), což je násobitel, který se používá pro míru příchozího přenosu dat, kapacitu úložiště a náklady spojené s SKU.</span><span class="sxs-lookup"><span data-stu-id="0caf1-422">**Scalability**: Azure Time Series Insights (TSI) is scaled with a metric named as “capacity” which is a multiplier applied to the ingress rate, storage capacity and the cost associated with the SKU.</span></span> 

<span data-ttu-id="0caf1-423">Azure Time Series Insights má několik SKU, které mají přímý vliv na vertikální měřítko.</span><span class="sxs-lookup"><span data-stu-id="0caf1-423">Azure Time Series Insights has multiple SKUs that also have direct effect on its vertical scale.</span></span> <span data-ttu-id="0caf1-424">Podrobnosti o škálování najdete v dokumentu [plánování Azure Time Series Insights prostředí](/azure/time-series-insights/time-series-insights-environment-planning?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-424">See the document [Plan your Azure Time Series Insights environment](/azure/time-series-insights/time-series-insights-environment-planning?WT.mc_id=iotinsightssoln-docs-ercenk) for details on scale.</span></span> <span data-ttu-id="0caf1-425">Podobně jako u mnoha dalších služeb Azure se také může jednat o omezení, aby nedocházelo k potížím s "přenositelností souseda".</span><span class="sxs-lookup"><span data-stu-id="0caf1-425">Like many other Azure services, TSI is also subject to throttling to avoid the “noisy neighbor” problem.</span></span> <span data-ttu-id="0caf1-426">Hlučná sousední síť je aplikace ve sdíleném prostředí/Azure/SQL-Database/SQL-Database-Service-Tiers-Vcore? WT. mc_id = iotinsightssoln-docs-ercenk, které nepřivlastnily všechny prostředky a starves ostatním uživatelům.</span><span class="sxs-lookup"><span data-stu-id="0caf1-426">A noisy neighbor is an application on a shared environment /azure/sql-database/sql-database-service-tiers-vcore?WT.mc_id=iotinsightssoln-docs-ercenk that monopolizes the resources and starves the other users.</span></span> <span data-ttu-id="0caf1-427">Pro správu omezování si prosím přečtěte [dokumentaci k TSI](/azure/time-series-insights/time-series-insights-environment-mitigate-latency?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-427">Please see the [TSI documentation](/azure/time-series-insights/time-series-insights-environment-mitigate-latency?WT.mc_id=iotinsightssoln-docs-ercenk) for managing the throttling.</span></span> 

<span data-ttu-id="0caf1-428">Cíle škálovatelnosti účtů úložiště jsou popsány v [Azure Storage škálovatelnost a výkonnostní cíle](/azure/storage/common/storage-scalability-targets?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-428">Scalability targets of storage accounts are documented in [Azure Storage Scalability and Performance Targets](/azure/storage/common/storage-scalability-targets?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span> <span data-ttu-id="0caf1-429">Běžnou technikou pro ukládání dat, která přesahují kapacitu jednoho účtu úložiště, je vytváření oddílů mezi několika účty úložiště.</span><span class="sxs-lookup"><span data-stu-id="0caf1-429">A common technique for storing data beyond the capacity of a single storage account is partitioning across multiple storage accounts.</span></span>

<span data-ttu-id="0caf1-430">Azure SQL Database má mnoho možností pro správu škálovatelnosti, jak vertikálně, tak horizontálně, v závislosti na modelu nákupu ([založeném na DTU](/azure/sql-database/sql-database-service-tiers-dtu?WT.mc_id=iotinsightssoln-docs-ercenk) a na Vcore).</span><span class="sxs-lookup"><span data-stu-id="0caf1-430">Azure SQL Database has many options to manage scalability, both vertically and horizontally, depending on the purchasing model ([DTU based](/azure/sql-database/sql-database-service-tiers-dtu?WT.mc_id=iotinsightssoln-docs-ercenk) and vCore based).</span></span> <span data-ttu-id="0caf1-431">Doporučujeme další výzkum a najít nejlepší možnost pro budoucí řešení pomocí [dokumentace SQL Database](/azure/sql-database/sql-database-scale-resources?WT.mc_id=iotinsightssoln-docs-ercenk) v tématu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-431">We recommend further research to find the best option for a future solution using the [SQL Database documentation](/azure/sql-database/sql-database-scale-resources?WT.mc_id=iotinsightssoln-docs-ercenk) on the topic.</span></span>

<span data-ttu-id="0caf1-432">**Zabezpečení**: prostředí TSI poskytují [zásady přístupu](/azure/time-series-insights/time-series-insights-data-access?WT.mc_id=iotinsightssoln-docs-ercenk) pro přístup ke správě a přístup k datům nezávisle na sobě.</span><span class="sxs-lookup"><span data-stu-id="0caf1-432">**Security**: TSI environments provide [access policies](/azure/time-series-insights/time-series-insights-data-access?WT.mc_id=iotinsightssoln-docs-ercenk) for management access and data access independent of each other.</span></span> <span data-ttu-id="0caf1-433">Neexistuje přímý způsob, jak přidat data do prostředí TSI kromě definovaných zdrojů dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-433">There is no direct way to add data to a TSI environment other than the defined data sources.</span></span> <span data-ttu-id="0caf1-434">Zásady přístupu pro správu udělují oprávnění související s konfigurací prostředí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-434">Management access policies grant permissions related to the configuration of the environment.</span></span> <span data-ttu-id="0caf1-435">Zásady přístupu k datům udělují oprávnění k vydávání dotazů na data, zpracování referenčních dat v rámci prostředí a sdílení uložených dotazů a perspektiv přidruženým k danému prostředí.</span><span class="sxs-lookup"><span data-stu-id="0caf1-435">Data access policies grant permissions to issue data queries, manipulate reference data in the environment, and share saved queries and perspectives associated with the environment.</span></span>

<span data-ttu-id="0caf1-436">Služba Azure Data Factory poskytuje několik metod pro zabezpečení přihlašovacích údajů úložiště dat, a to buď ve spravovaném úložišti, nebo v Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="0caf1-436">Azure Data Factory service provides multiple methods for securing data store credentials, either in its managed store, or in Azure Key Vault.</span></span> <span data-ttu-id="0caf1-437">Šifrování dat v přenosu závisí na přenosu úložiště dat (např. HTTPS nebo TLS).</span><span class="sxs-lookup"><span data-stu-id="0caf1-437">In-transit data encryption depends on the data store’s transport (e.g. HTTPS or TLS).</span></span> <span data-ttu-id="0caf1-438">Šifrování dat na základě REST závisí také na úložištích dat.</span><span class="sxs-lookup"><span data-stu-id="0caf1-438">At-rest data encryption also depends on the data stores.</span></span> <span data-ttu-id="0caf1-439">Další podrobnosti najdete [v tématu požadavky na zabezpečení při přesunu dat v Azure Data Factory](/azure/data-factory/data-movement-security-considerations?WT.mc_id=iotinsightssoln-docs-ercenk) .</span><span class="sxs-lookup"><span data-stu-id="0caf1-439">See [Security considerations for data movement in Azure Data Factory](/azure/data-factory/data-movement-security-considerations?WT.mc_id=iotinsightssoln-docs-ercenk) for further details.</span></span>

<span data-ttu-id="0caf1-440">SQL Database poskytuje rozsáhlou sadu funkcí zabezpečení pro přístup k datům, monitorování a auditování a také šifrování dat v klidovém formátu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-440">SQL Database provides an extensive set of security features for data access, monitoring and auditing as well as encrypting data at rest.</span></span> <span data-ttu-id="0caf1-441">Podrobnosti najdete v tématu [Security Center pro SQL Server databázový stroj a Azure SQL Database](/sql/relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database?WT.mc_id=iotinsightssoln-docs-ercenk).</span><span class="sxs-lookup"><span data-stu-id="0caf1-441">For details, see [Security Center for SQL Server Database Engine and Azure SQL Database](/sql/relational-databases/security/security-center-for-sql-server-database-engine-and-azure-sql-database?WT.mc_id=iotinsightssoln-docs-ercenk).</span></span>

<span data-ttu-id="0caf1-442">**Cenová efektivita**: na srdce každého analytického řešení je úložiště.</span><span class="sxs-lookup"><span data-stu-id="0caf1-442">**Cost Efficiency**: At the heart of any analytics solution is the storage.</span></span> <span data-ttu-id="0caf1-443">Analytické moduly potřebují pro zpracování objemů dat v rozumných časech rychlost, efektivitu, zabezpečení a propustnost.</span><span class="sxs-lookup"><span data-stu-id="0caf1-443">Analytics engines need speed, efficiency, security, and throughput for processing volumes of data in reasonable times.</span></span> <span data-ttu-id="0caf1-444">Sestavování mechanismů pro zajištění nejlepšího využití základní platformy, agregací a sumarizace dat a efektivní používání úložišť Polyglot jsou prostředky pro efektivní správu nákladů.</span><span class="sxs-lookup"><span data-stu-id="0caf1-444">Devising mechanisms to make best of use of the underlying platform, by aggregating and summarizing data, and efficiently using polyglot stores are the means for efficiently managing costs.</span></span> <span data-ttu-id="0caf1-445">Jelikož je Azure cloudová platforma, existují metody pro programové vyřazení z provozu, restavování a změnu velikosti prostředků z provozu.</span><span class="sxs-lookup"><span data-stu-id="0caf1-445">As Azure is a cloud platform, there are methods to programmatically decommission, recommission, and resize resources.</span></span> <span data-ttu-id="0caf1-446">Například [operace vytvořit nebo aktualizovat](/rest/api/sql/databases/createorupdate?WT.mc_id=iotinsightssoln-docs-ercenk) poskytuje způsob, jak změnit velikost databáze Azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="0caf1-446">For example, the [Create or Update operation](/rest/api/sql/databases/createorupdate?WT.mc_id=iotinsightssoln-docs-ercenk) provides a way to change the database size of Azure SQL Database.</span></span>